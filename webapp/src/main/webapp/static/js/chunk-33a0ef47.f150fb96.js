(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33a0ef47"],{"0a49":function(e,t,n){var r=n("9b43"),i=n("626a"),a=n("4bf8"),o=n("9def"),s=n("cd1c");e.exports=function(e,t){var n=1==e,c=2==e,u=3==e,l=4==e,d=6==e,p=5==e||d,f=t||s;return function(t,s,h){for(var g,v,m=a(t),b=i(m),y=r(s,h,3),G=o(b.length),x=0,k=n?f(t,G):c?f(t,0):void 0;G>x;x++)if((p||x in b)&&(g=b[x],v=y(g,x,m),e))if(n)k[x]=v;else if(v)switch(e){case 3:return!0;case 5:return g;case 6:return x;case 2:k.push(g)}else if(l)return!1;return d?-1:u||l?l:k}}},1169:function(e,t,n){var r=n("2d95");e.exports=Array.isArray||function(e){return"Array"==r(e)}},"2cdb":function(e,t,n){},6061:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"side-tree"},[e.isEmpty?e._e():n("gs-search",e._b({ref:"search",attrs:{placeholder:e.searchPlaceholder},model:{value:e.searchVal,callback:function(t){e.searchVal=t},expression:"searchVal"}},"gs-search",e.searchProps,!1)),e.isEmpty?e._e():n("gs-tree",e._b({ref:"tree",attrs:{"render-content":e.renderTreeNode,"default-expanded-keys":e.expand,"node-key":"guid"},on:{"node-toggle":e.handleNodeToggle}},"gs-tree",e.treeProps,!1)),!e.loading&&e.isEmpty&&e.hasAction?n("gs-button",{staticClass:"empty-btn",attrs:{disabled:e.treeProps.disabled,type:"primary"},on:{click:e.createCategory}},[e._v("\n    "+e._s(e.emptyBtnText)+"\n  ")]):e._e()],1)},i=[],a={props:{loading:{type:Boolean,default:!1},searchProps:{type:Object,default:function(){return{}}},treeProps:{type:Object,default:function(){return{}}},keyword:{type:String,default:""},actions:{type:[Array,Function],default:function(){return[]}},active:{type:Object,default:function(){return{}}},hasAction:{type:Boolean,default:!0},defaultExpanded:{type:Boolean,default:!0},defaultExpandedKeys:{type:Array,default:function(){return[]}},preicon:{type:String,default:"iconfont icon-wenjianjia1"},searchPlaceholder:{type:String,default:"请输入目录名称"},emptyBtnText:{type:String,default:"点击添加目录"}},data:function(){return{searchVal:this.keyword,expandedKeys:[]}},computed:{isEmpty:function(){return this.loading||0===this.treeProps.data.length},expand:function(){return this.defaultExpandedKeys&&this.defaultExpandedKeys.length?this.defaultExpandedKeys:this.expandedKeys}},watch:{keyword:function(e){this.searchVal=e},searchVal:function(e){this.$emit("search",e)},treeProps:function(e){e.data&&e.data.length&&this.defaultExpanded&&this.getExpandedKeys(e.data)},expandedKeys:function(e){var t=this.treeProps.data||[];if(e&&e.length){var n=t.filter(function(t){return t.guid===e[0]});if(!n||!n.length)return;if(n[0]["privilege"]&&!n[0]["privilege"]["ash"])return void this.$emit("set-active",n[0]);var r=n[0]["children"]||[],i=r.filter(function(e){return e.privilege&&!e.privilege.ash});if(!i||!i.length)return;this.$emit("set-active",i[0])}else{if(!t||!t.length)return;this.$emit("set-active",t[0])}}},methods:{getExpandedKeys:function(e){function t(e,t){var n=[],r=function e(r){r.map(function(r){r.privilege&&r.privilege.ash===t&&(n.push(r.guid),r.children&&r.children&&e(r.children))})};return r(e),n}this.expandedKeys=t(e,!0)},renderTreeNode:function(e,t){var n=t.node,r=t.data,i=this.actions,a=this.treeProps,o=this.active,s=this.hasAction,c=a.props,u=c.label,l=c.value,d=c.deleting,p=void 0===d?"deleting":d,f="side-tree-node-label";return"function"===typeof i&&(i=i(r)),f+=o[l]===r[l]?" is-active":"",f+=r["disabled"]?" is-disabled":"",f+=r[p]?" is-deleting":"",e("div",{class:"side-tree-node-content"},[r[p]?e("span",{class:f},[e("gs-icon",{class:"side-tree-node-icon",attrs:{title:"正在删除",name:"loading"}}),r[u]]):e("span",{attrs:{title:r[u]},class:f,on:{click:this.handleClick.bind(this,r)}},[e("i",{class:this.preicon}),r[u]]),s?e("gs-dropdown",{class:"side-tree-action",attrs:{trigger:"click"},on:{select:this.handleAction.bind(this,{node:n,data:r})}},[e("gs-icon",{class:"gs-dropdown-link",attrs:{name:"ellipsis",mode:"button"}}),e("gs-dropdown-menu",{attrs:{align:"right"},slot:"dropdown"},[e("gs-dropdown-items",{attrs:{options:i}})])]):null])},handleNodeToggle:function(e,t){this.$emit("node-toggle",e.data,t)},handleClick:function(e){e.disabled||this.$emit("node-click",e)},handleAction:function(e,t){var n=e.node,r=e.data;this.$emit("node-action",r,t,n)},createCategory:function(){this.$emit("create-category")}}},o=a,s=n("2877"),c=Object(s["a"])(o,r,i,!1,null,null,null),u=c.exports;n("60c1"),t["a"]=u},"60c1":function(e,t,n){},"641e":function(e,t,n){},7514:function(e,t,n){"use strict";var r=n("5ca1"),i=n("0a49")(5),a="find",o=!0;a in[]&&Array(1)[a](function(){o=!1}),r(r.P+r.F*o,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(a)},acc6:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return!e.upperLevel||e.isHideNav?n("div",{staticClass:"content-header-single"},[e._t("header",[e._v("\n    "+e._s(e.currentLevel)+"\n  ")])],2):n("div",{staticClass:"content-header-both"},[n("div",{staticClass:"back-link"},[n("router-link",{attrs:{to:e.backPath}},[n("gs-button",{staticClass:"back-btn",attrs:{type:"primary"},on:{click:e.backBtnClick}},[n("i",{staticClass:"gs-icon gs-icon-revoke"})])],1)],1),n("div",{staticClass:"nav-name"},[n("div",{staticClass:"current-nav"},[e._v("\n      "+e._s(e.currentLevel)+"\n    ")]),n("div",{staticClass:"upper-nav"},[e._v("\n      "+e._s(e.upperLevel)+"\n    ")])])])},i=[],a={name:"BreadCrumb",props:{currentLevel:{type:String,required:!0},upperLevel:{type:String,default:""},backPath:{type:String,default:""}},data:function(){return{}},computed:{isHideNav:function(){return!!this.$router.currentRoute.query.nav}},methods:{backBtnClick:function(){this.$emit("back")}}},o=a,s=n("2877"),c=Object(s["a"])(o,r,i,!1,null,null,null),u=c.exports;n("d12e"),t["a"]=u},c4bf:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"data-share"},[n("div",{staticClass:"content-header"},[n("bread-crumb",{attrs:{"current-level":"数据分享"}})],1),n("two-column-layout",[n("template",{slot:"left"},[e.sourceGroupTree.length?n("gs-button",{staticClass:"add-group-btn",attrs:{type:"primary",icon:"plus"},on:{click:e.openAddGroupModal}}):e._e(),n("side-tree",{ref:"sideTree",attrs:{slot:"left",loading:e.loadingGroup,active:e.activeGroup,actions:e.actions,"tree-props":e.treeProps,"empty-btn-text":"点击创建分组",preicon:"","search-placeholder":"请输入分组名称"},on:{search:e.handleGroupSearch,"node-click":e.handleSelectGroup,"node-action":e.handleNodeAction,"create-category":e.openAddGroupModal},slot:"left"})],1),n("template",{slot:"right"},[n("router-view",{attrs:{"active-group":e.activeGroup}})],1)],2),n("edit-group",{attrs:{data:e.changeGroupInfo},on:{refresh:e.fetchGroupList},model:{value:e.editGroupModalVisible,callback:function(t){e.editGroupModalVisible=t},expression:"editGroupModalVisible"}})],1)},i=[],a=(n("a481"),n("7514"),n("7f7f"),n("6762"),n("2fdb"),n("db72")),o=n("efbf"),s=n("acc6"),c=n("6061"),u=n("f63f"),l=n("ed08"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("gs-modal",{staticClass:"edit-group",on:{cancel:function(t){return e.$emit("input",!1)},confirm:e.confirm,"visible-change":e.visibleChange},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("gs-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"60px"}},[n("gs-form-item",{attrs:{label:"名称",prop:"name"}},[n("gs-input",{attrs:{placeholder:"请输入分组名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("gs-form-item",{attrs:{label:"描述",prop:"description"}},[n("gs-textarea",{model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1)],1)},p=[],f={props:{value:{type:Boolean,default:!1},data:{type:Object,default:function(){return{}}}},data:function(){return{visible:!1,form:{name:"",description:""},rules:{name:[{required:!0,message:"请输入分组名称，且长度不能超过200字符",max:200,trigger:"blur"}]}}},watch:{value:function(e){this.visible=e}},methods:{confirm:function(){var e=this;this.$refs.form.validate(function(t){t&&(e.data&&e.data.guid?u["editGroup"]({groupId:e.data.guid,params:e.form}).then(function(t){e.$Message.success("修改成功"),e.$emit("refresh"),e.$emit("input",!1)}):u["addGroup"](e.form).then(function(t){e.$Message.success("添加成功"),e.$emit("refresh"),e.$emit("input",!1)}))})},visibleChange:function(e){if(e&&(this.$refs.form.resetFields(),this.data&&this.data.guid)){var t=this.data,n=t.name,r=t.description;this.form={name:n,description:r}}}}},h=f,g=n("2877"),v=Object(g["a"])(h,d,p,!1,null,null,null),m=v.exports,b=n("2f62"),y=(n("641e"),function(e){return[{label:"修改组名",value:0,disabled:!e.parentGuid||"0"===e.guid},{label:"删除分组",value:1,disabled:!e.parentGuid||"0"===e.guid}]}),G={components:{TwoColumnLayout:o["a"],BreadCrumb:s["a"],sideTree:c["a"],editGroup:m},data:function(){return{tableList:[],loadingGroup:!1,activeGroup:{},actions:y,groupTree:[],editGroupModalVisible:!1,changeGroupInfo:null}},computed:Object(a["a"])({},Object(b["c"])("datashare",{sourceGroupTree:"sourceGroupTree"}),{treeProps:function(){return{data:this.groupTree,"node-key":"guid","default-all-expand":!0,props:{label:"name",value:"guid"},filterNodeMethod:function(e,t){return!e||t.name.includes(e)}}}}),created:function(){var e=this;this.fetchGroupList().then(function(t){if(e.$route.query.groupId){var n=e.sourceGroupTree.find(function(t){return t.guid===e.$route.query.groupId});e.activeGroup=n||e.groupTree[0]}else e.activeGroup=e.groupTree[0],e.$route.query.groupId=e.groupTree[0].guid}),window.that=this},methods:Object(a["a"])({},Object(b["b"])("datashare",["getGroupList"]),{handleGroupSearch:function(e){this.$refs.sideTree.$refs.tree.filter(e)},handleSelectGroup:function(e){"/main/data-share"!==this.$route.path&&this.$router.replace("/main/data-share"),this.activeGroup=e,this.$router.replace({query:{groupId:e.guid}})},handleNodeAction:function(e,t){0===t&&(this.changeGroupInfo=e,this.editGroupModalVisible=!0),1===t&&this.deleteGroup(e)},openAddGroupModal:function(){this.changeGroupInfo=null,this.editGroupModalVisible=!0},fetchGroupList:function(){var e=this;return this.loadingGroup=!0,this.getGroupList().then(function(t){e.loadingGroup=!1,e.groupTree=Object(l["e"])(e.sourceGroupTree,"guid","parentGuid")}).catch(function(t){e.loadingGroup=!1})},deleteGroup:function(e){var t=this,n=e.guid;this.$Modal.confirm({title:"删除分组",content:"确定删除该分组，删除后将无法恢复",onOk:function(){u["deleteGroup"](n).then(function(e){t.$Message.success("删除成功"),t.fetchGroupList(),t.activeGroup=t.groupTree[0]})}})}})},x=G,k=Object(g["a"])(x,r,i,!1,null,null,null);t["default"]=k.exports},cd1c:function(e,t,n){var r=n("e853");e.exports=function(e,t){return new(r(e))(t)}},d12e:function(e,t,n){},e853:function(e,t,n){var r=n("d3f4"),i=n("1169"),a=n("2b4c")("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&(t=t[a],null===t&&(t=void 0))),void 0===t?Array:t}},efbf:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"two-column-layout"},[n("div",{staticClass:"left-col"},[e._t("left")],2),n("div",{staticClass:"right-col"},[e._t("right")],2)])},i=[],a={props:{leftProps:{type:Object,default:function(){return{span:6,xs:{span:24}}}},rightProps:{type:Object,default:function(){return{span:18,xs:{span:24}}}}}},o=a,s=n("2877"),c=Object(s["a"])(o,r,i,!1,null,null,null),u=c.exports;n("2cdb"),t["a"]=u}}]);
//# sourceMappingURL=chunk-33a0ef47.f150fb96.js.map