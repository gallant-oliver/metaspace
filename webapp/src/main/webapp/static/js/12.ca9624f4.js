webpackJsonp([12],{2109:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2110),i=n(2115),a=n(378)(r.a,i.a,null,null,null);t.default=a.exports},2110:function(e,t,n){"use strict";var r=n(63),i=n.n(r),a=n(778),s=n(747),o=n(786),u=n(779),c=n(758),l=n(2111),d=n(743),p=n(2114),f=(n.n(p),function(e){return[{label:"修改组名",value:0,disabled:!e.parentGuid||"0"===e.guid},{label:"删除分组",value:1,disabled:!e.parentGuid||"0"===e.guid}]});t.a={components:{TwoColumnLayout:a.a,BreadCrumb:s.a,sideTree:o.a,editGroup:l.a},data:function(){return{tableList:[],loadingGroup:!1,activeGroup:{},actions:f,groupTree:[],editGroupModalVisible:!1,changeGroupInfo:null}},computed:i()({},Object(d.c)("datashare",{sourceGroupTree:"sourceGroupTree"}),{treeProps:function(){return{data:this.groupTree,"node-key":"guid","default-all-expand":!0,props:{label:"name",value:"guid"},filterNodeMethod:function(e,t){return!e||t.name.includes(e)}}}}),created:function(){var e=this;this.fetchGroupList().then(function(t){if(e.$route.query.groupId){var n=e.sourceGroupTree.find(function(t){return t.guid===e.$route.query.groupId});e.activeGroup=n||e.groupTree[0]}else e.activeGroup=e.groupTree[0],e.$route.query.groupId=e.groupTree[0].guid}),window.that=this},methods:i()({},Object(d.b)("datashare",["getGroupList"]),{handleGroupSearch:function(e){this.$refs.sideTree.$refs.tree.filter(e)},handleSelectGroup:function(e){"/main/data-share"!==this.$route.path&&this.$router.replace("/main/data-share"),this.activeGroup=e,this.$router.replace({query:{groupId:e.guid}})},handleNodeAction:function(e,t){0===t&&(this.changeGroupInfo=e,this.editGroupModalVisible=!0),1===t&&this.deleteGroup(e)},openAddGroupModal:function(){this.changeGroupInfo=null,this.editGroupModalVisible=!0},fetchGroupList:function(){var e=this;return this.loadingGroup=!0,this.getGroupList().then(function(t){e.loadingGroup=!1,e.groupTree=Object(c.e)(e.sourceGroupTree,"guid","parentGuid")}).catch(function(t){e.loadingGroup=!1})},deleteGroup:function(e){var t=this,n=e.guid;this.$Modal.confirm({title:"删除分组",content:"确定删除该分组，删除后将无法恢复",onOk:function(){u.deleteGroup(n).then(function(e){t.$Message.success("删除成功"),t.fetchGroupList(),t.activeGroup=t.groupTree[0]})}})}})}},2111:function(e,t,n){"use strict";var r=n(2112),i=n(2113),a=n(378)(r.a,i.a,null,null,null);t.a=a.exports},2112:function(e,t,n){"use strict";var r=n(779);t.a={props:{value:{type:Boolean,default:!1},data:{type:Object,default:function(){return{}}}},data:function(){return{visible:!1,form:{name:"",description:""},rules:{name:[{required:!0,message:"请输入分组名称",trigger:"blur"}]}}},watch:{value:function(e){this.visible=e}},methods:{confirm:function(){var e=this;this.$refs.form.validate(function(t){t&&(e.data&&e.data.guid?r.editGroup({groupId:e.data.guid,params:e.form}).then(function(t){e.$Message.success("修改成功"),e.$emit("refresh"),e.$emit("input",!1)}):r.addGroup(e.form).then(function(t){e.$Message.success("添加成功"),e.$emit("refresh"),e.$emit("input",!1)}))})},visibleChange:function(e){if(e&&(this.$refs.form.resetFields(),this.data&&this.data.guid)){var t=this.data,n=t.name,r=t.description;this.form={name:n,description:r}}}}}},2113:function(e,t,n){"use strict";var r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("gs-modal",{staticClass:"edit-group",on:{cancel:function(t){return e.$emit("input",!1)},confirm:e.confirm,"visible-change":e.visibleChange},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("gs-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"60px"}},[n("gs-form-item",{attrs:{label:"名称",prop:"name"}},[n("gs-input",{attrs:{placeholder:"请输入分组名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),n("gs-form-item",{attrs:{label:"描述",prop:"description"}},[n("gs-textarea",{model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1)],1)},staticRenderFns:[]};t.a=r},2114:function(e,t){},2115:function(e,t,n){"use strict";var r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"data-share"},[n("div",{staticClass:"content-header"},[n("bread-crumb",{attrs:{"current-level":"数据分享"}})],1),e._v(" "),n("two-column-layout",[n("template",{slot:"left"},[e.sourceGroupTree.length?n("gs-button",{staticClass:"add-group-btn",attrs:{type:"primary",icon:"plus"},on:{click:e.openAddGroupModal}}):e._e(),e._v(" "),n("side-tree",{ref:"sideTree",attrs:{slot:"left",loading:e.loadingGroup,active:e.activeGroup,actions:e.actions,"tree-props":e.treeProps,"empty-btn-text":"点击创建分组",preicon:"","search-placeholder":"请输入分组名称"},on:{search:e.handleGroupSearch,"node-click":e.handleSelectGroup,"node-action":e.handleNodeAction,"create-category":e.openAddGroupModal},slot:"left"})],1),e._v(" "),n("template",{slot:"right"},[n("router-view",{attrs:{"active-group":e.activeGroup}})],1)],2),e._v(" "),n("edit-group",{attrs:{data:e.changeGroupInfo},on:{refresh:e.fetchGroupList},model:{value:e.editGroupModalVisible,callback:function(t){e.editGroupModalVisible=t},expression:"editGroupModalVisible"}})],1)},staticRenderFns:[]};t.a=r},747:function(e,t,n){"use strict";var r=n(748),i=n(751);n.n(i);t.a=r.a},748:function(e,t,n){"use strict";var r=n(749),i=n(750),a=n(378)(r.a,i.a,null,null,null);t.a=a.exports},749:function(e,t,n){"use strict";t.a={name:"BreadCrumb",props:{currentLevel:{type:String,required:!0},upperLevel:{type:String,default:""},backPath:{type:String,default:""}},data:function(){return{}},computed:{isHideNav:function(){return!!this.$router.currentRoute.query.nav}}}},750:function(e,t,n){"use strict";var r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return!e.upperLevel||e.isHideNav?n("div",{staticClass:"content-header-single"},[e._t("header",[e._v("\n    "+e._s(e.currentLevel)+"\n  ")])],2):n("div",{staticClass:"content-header-both"},[n("div",{staticClass:"back-link"},[n("router-link",{attrs:{to:e.backPath}},[n("gs-button",{staticClass:"back-btn",attrs:{type:"primary"}},[n("i",{staticClass:"gs-icon gs-icon-revoke"})])],1)],1),e._v(" "),n("div",{staticClass:"nav-name"},[n("div",{staticClass:"current-nav"},[e._v(e._s(e.currentLevel))]),e._v(" "),n("div",{staticClass:"upper-nav"},[e._v(e._s(e.upperLevel))])])])},staticRenderFns:[]};t.a=r},751:function(e,t){},778:function(e,t,n){"use strict";var r=n(791),i=n(794);n.n(i);t.a=r.a},786:function(e,t,n){"use strict";var r=n(787),i=n(790);n.n(i);t.a=r.a},787:function(e,t,n){"use strict";var r=n(788),i=n(789),a=n(378)(r.a,i.a,null,null,null);t.a=a.exports},788:function(e,t,n){"use strict";t.a={props:{loading:{type:Boolean,default:!1},searchProps:{type:Object,default:function(){return{}}},treeProps:{type:Object,default:function(){return{}}},keyword:{type:String,default:""},actions:{type:[Array,Function],default:function(){return[]}},active:{type:Object,default:function(){return{}}},hasAction:{type:Boolean,default:!0},defaultExpanded:{type:Boolean,default:!0},defaultExpandedKeys:{type:Array,default:function(){return[]}},preicon:{type:String,default:"iconfont icon-wenjianjia1"},searchPlaceholder:{type:String,default:"请输入目录名称"},emptyBtnText:{type:String,default:"点击添加目录"}},data:function(){return{searchVal:this.keyword,expandedKeys:[]}},computed:{isEmpty:function(){return this.loading||0===this.treeProps.data.length},expand:function(){return this.defaultExpandedKeys&&this.defaultExpandedKeys.length?this.defaultExpandedKeys:this.expandedKeys}},watch:{keyword:function(e){this.searchVal=e},searchVal:function(e){this.$emit("search",e)},treeProps:function(e){e.data&&e.data.length&&this.defaultExpanded&&this.getExpandedKeys(e.data)},expandedKeys:function(e){var t=this.treeProps.data||[];if(e&&e.length){var n=t.filter(function(t){return t.guid===e[0]});if(!n||!n.length)return;if(n[0].privilege&&!n[0].privilege.ash)return void this.$emit("set-active",n[0]);var r=(n[0].children||[]).filter(function(e){return e.privilege&&!e.privilege.ash});if(!r||!r.length)return;this.$emit("set-active",r[0])}else{if(!t||!t.length)return;this.$emit("set-active",t[0])}}},methods:{getExpandedKeys:function(e){this.expandedKeys=function(e,t){var n=[];return function e(r){r.map(function(r){r.privilege&&r.privilege.ash===t&&(n.push(r.guid),r.children&&r.children&&e(r.children))})}(e),n}(e,!0)},renderTreeNode:function(e,t){t.node;var n,r=t.data,i=this.actions,a=this.treeProps,s=this.active,o=this.hasAction,u=a.props,c=u.label,l=u.value,d=u.deleting,p=void 0===d?"deleting":d,f="side-tree-node-label";return"function"==typeof i&&(i=i(r)),f+=s[l]===r[l]?" is-active":"",f+=r.disabled?" is-disabled":"",f+=r[p]?" is-deleting":"",e("div",{class:"side-tree-node-content"},[r[p]?e("span",{class:f},[e("gs-icon",{class:"side-tree-node-icon",attrs:{title:"正在删除",name:"loading"}}),r[c]]):e("span",{attrs:{title:r[c]},class:f,on:{click:this.handleClick.bind(this,r)}},[e("i",(n={class:"side-tree-node-icon"},n.class=this.preicon,n)),r[c]]),o?e("gs-dropdown",{class:"side-tree-action",attrs:{trigger:"click"},on:{select:this.handleAction.bind(this,r)}},[e("gs-icon",{class:"gs-dropdown-link",attrs:{name:"ellipsis",mode:"button"}}),e("gs-dropdown-menu",{attrs:{align:"right"},slot:"dropdown"},[e("gs-dropdown-items",{attrs:{options:i}})])]):null])},handleNodeToggle:function(e,t){this.$emit("node-toggle",e.data,t)},handleClick:function(e){e.disabled||this.$emit("node-click",e)},handleAction:function(e,t){this.$emit("node-action",e,t)},createCategory:function(){this.$emit("create-category")}}}},789:function(e,t,n){"use strict";var r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"side-tree"},[e.isEmpty?e._e():n("gs-search",e._b({ref:"search",attrs:{placeholder:e.searchPlaceholder},model:{value:e.searchVal,callback:function(t){e.searchVal=t},expression:"searchVal"}},"gs-search",e.searchProps,!1)),e._v(" "),e.isEmpty?e._e():n("gs-tree",e._b({ref:"tree",attrs:{"render-content":e.renderTreeNode,"default-expanded-keys":e.expand,"node-key":"guid"},on:{"node-toggle":e.handleNodeToggle}},"gs-tree",e.treeProps,!1)),e._v(" "),!e.loading&&e.isEmpty&&e.hasAction?n("gs-button",{attrs:{disabled:e.treeProps.disabled,type:"primary"},on:{click:e.createCategory}},[e._v(e._s(e.emptyBtnText))]):e._e()],1)},staticRenderFns:[]};t.a=r},790:function(e,t){},791:function(e,t,n){"use strict";var r=n(792),i=n(793),a=n(378)(r.a,i.a,null,null,null);t.a=a.exports},792:function(e,t,n){"use strict";t.a={props:{leftProps:{type:Object,default:function(){return{span:6,xs:{span:24}}}},rightProps:{type:Object,default:function(){return{span:18,xs:{span:24}}}}}}},793:function(e,t,n){"use strict";var r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"two-column-layout"},[t("div",{staticClass:"left-col"},[this._t("left")],2),this._v(" "),t("div",{staticClass:"right-col"},[this._t("right")],2)])},staticRenderFns:[]};t.a=r},794:function(e,t){}});
//# sourceMappingURL=12.ca9624f4.js.map