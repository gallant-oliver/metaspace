{"version":3,"sources":["webpack:///./src/views/auth/auth/index.vue","webpack:///index.vue?fcd1","webpack:///./src/views/auth/auth/add-auth.vue","webpack:///add-auth.vue","webpack:///./src/views/auth/auth/add-auth.vue?ad7d","webpack:///./src/views/auth/auth/index.vue?e49c","webpack:///./src/service/auth/auth.js"],"names":["Object","defineProperty","__webpack_exports__","value","__WEBPACK_IMPORTED_MODULE_0__happypack_loader_id_babel_node_modules_vue_loader_lib_selector_type_script_index_0_index_vue__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_78015ce5_hasScoped_false_node_modules_vue_loader_lib_selector_type_template_index_0_index_vue__","Component","normalizeComponent","components","addAuth","__WEBPACK_IMPORTED_MODULE_2__add_auth__","data","keyword","tableData","userId","username","account","roles","pagination","total","pageSize","pageSizes","current","loading","editPrivilegeId","editModalVisible","computed","created","this","fetchAuthList","methods","_this","arguments","length","undefined","__WEBPACK_IMPORTED_MODULE_1_src_service_auth_auth__","offset","limit","query","then","lists","map","item","role","i","roleName","sum","catch","e","pageChange","sizeChange","size","addPrivilege","form","_this2","$Message","success","editPrivilege","_ref","_this3","id","params","openEditAuthModal","_ref2","row","privilegeId","deleteAuth","_ref3","_this4","$Modal","confirm","title","content","onOk","warning","openAddAuthModal","__WEBPACK_IMPORTED_MODULE_0__happypack_loader_id_babel_node_modules_vue_loader_lib_selector_type_script_index_0_add_auth_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_08e7c8de_hasScoped_false_node_modules_vue_loader_lib_selector_type_template_index_0_add_auth_vue__","props","type","String","default","Boolean","roleOptions","modules","description","privilegeName","rules","required","message","trigger","opeModules","authModules","visible","get","set","val","$refs","validate","valid","$emit","visibleChange","clearValidate","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise___default","a","all","__WEBPACK_IMPORTED_MODULE_3_src_service_auth_auth__","filter","_","getPrivilegeDetail","moduleId","roleId","opeModuleCheckboxChange","Array","isArray","includes","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_array_from___default","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_set___default","concat","authModuleCheckboxChange","removeItem","findIndex","splice","_removeItem","esExports","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","top","on","cancel","$event","visible-change","model","callback","$$v","expression","is-show","_v","ref","label-width","label","prop","$set","change","_l","key","_s","moduleName","multiple","staticRenderFns","click","placeholder","clear","search","directives","name","rawName","staticStyle","width","paging","size-change","page-change","scopedSlots","_u","fn","scope","tags","show-count","fixed","disabled","edit","delete","privilege-id","http","post","put","__WEBPACK_IMPORTED_MODULE_0_src_utils_http__"],"mappings":"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","file":"static/js/17.9a07ad6d.js","sourcesContent":["var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!happypack/loader?id=babel!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-78015ce5\\\",\\\"hasScoped\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/auth/auth/index.vue\n// module id = 2056\n// module chunks = 17","<template>\n  <div class=\"auth-mangement\">\n    <div class=\"search-box\">\n      <gs-button\n        type=\"primary\"\n        @click=\"openAddAuthModal\"\n      >添加方案</gs-button>\n      <gs-search\n        v-model=\"keyword\"\n        placeholder=\"请输入方案名称\"\n        @clear=\"fetchAuthList(1)\"\n        @search=\"fetchAuthList\"\n      />\n    </div>\n    <gs-table\n      v-loading=\"loading\"\n      :data=\"tableData\"\n      :pagination=\"pagination\"\n      style=\"width: 100%\"\n      paging\n      @size-change=\"sizeChange\"\n      @page-change=\"pageChange\"\n    >\n      <gs-table-column\n        prop=\"privilegeName\"\n        label=\"方案名称\"\n      />\n      <gs-table-column\n        prop=\"description\"\n        label=\"描述\"\n      />\n      <gs-table-column\n        prop=\"roles\"\n        label=\"授权角色\"\n      >\n        <template slot-scope=\"scope\">\n          <gs-table-tags\n            :tags=\"scope.row.role\"\n            :show-count=\"2\"\n          />\n        </template>\n      </gs-table-column>\n      <gs-table-column\n        label=\"操作\"\n        width=\"100\"\n        fixed=\"right\"\n      >\n        <template slot-scope=\"scope\">\n          <gs-button\n            :disabled=\"!(!!scope.row.edit)\"\n            type=\"text-primary\"\n            @click=\"openEditAuthModal(scope)\"\n          >编辑</gs-button>\n          <gs-button\n            :disabled=\"!(!!scope.row.delete)\"\n            type=\"text-primary\"\n            @click=\"deleteAuth(scope)\"\n          >删除</gs-button>\n        </template>\n      </gs-table-column>\n    </gs-table>\n    <add-auth\n      :privilege-id=\"editPrivilegeId\"\n      v-model=\"editModalVisible\"\n      @addPrivilege=\"addPrivilege\"\n      @editPrivilege=\"editPrivilege\"\n    />\n  </div>\n</template>\n<script>\nimport './style';\nimport * as service from 'src/service/auth/auth';\nimport addAuth from './add-auth';\nexport default {\n  components: {\n    addAuth\n  },\n  data() {\n    return {\n      keyword: '',\n      tableData: [\n        {\n          userId: '1',\n          username: '1',\n          account: 'in',\n          roles: ['amet irure', '222']\n        }\n      ],\n      pagination: {\n        total: 0,\n        pageSize: 10,\n        pageSizes: [10, 20, 30],\n        current: 1\n      },\n      loading: false,\n      editPrivilegeId: '',\n      editModalVisible: false\n    };\n  },\n  computed: {\n\n  },\n\n  created() {\n    this.fetchAuthList(1);\n  },\n\n  methods: {\n    fetchAuthList(isfirstPage = 0) {\n      if (isfirstPage === 1) this.pagination.current = 1;\n      this.loading = true;\n      service.getPrivilegeList({\n        offset: (this.pagination.current - 1) * this.pagination.pageSize,\n        limit: this.pagination.pageSize,\n        query: this.keyword\n      }).then(data => {\n        data.lists.map(item => {\n          item.role = item.roles.map(i => i.roleName);\n          return item;\n        });\n        this.tableData = data.lists;\n        this.pagination.total = data.sum;\n        this.loading = false;\n      }).catch(e => {\n        this.loading = false;\n      });\n    },\n    pageChange(current) {\n      this.pagination.current = current;\n      this.fetchAuthList();\n    },\n    sizeChange(size) {\n      this.pagination.pageSize = size;\n      this.fetchAuthList(1);\n    },\n    addPrivilege(form) {\n      service.createPrivilege(form).then(data => {\n        this.fetchAuthList(1);\n        this.$Message.success('添加方案成功！');\n        this.editModalVisible = false;\n      });\n    },\n    editPrivilege({id, params}) {\n      service.editPrivilege(id, params).then(data => {\n        this.fetchAuthList();\n        this.$Message.success('修改方案成功！');\n        this.editModalVisible = false;\n      });\n    },\n    openEditAuthModal({row}) {\n      this.editPrivilegeId = row.privilegeId;\n      this.editModalVisible = true;\n    },\n    deleteAuth({row}) {\n      if (row.privilegeId && (!row.roles || (row.roles && !row.roles.length))) {\n        this.$Modal.confirm({\n          title: '警告',\n          content: '是否删除该权限方案？删除后将无法恢复',\n          onOk: () => {\n            service.deletePrivilege(row.privilegeId).then(data => {\n              this.$Message.success('删除权限方案成功');\n              this.fetchAuthList();\n            });\n          }\n        });\n      } else {\n        this.$Message.warning('请先全清空使用该权限方案的角色！');\n      }\n    },\n    openAddAuthModal() {\n      this.editPrivilegeId = '';\n      this.editModalVisible = true;\n    }\n  }\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// index.vue?689bf77a","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!happypack/loader?id=babel!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./add-auth.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-08e7c8de\\\",\\\"hasScoped\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./add-auth.vue\"\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/auth/auth/add-auth.vue\n// module id = 2059\n// module chunks = 17","<template>\n  <gs-modal\n    :title=\"title\"\n    v-model=\"visible\"\n    class=\"add-auth\"\n    top=\"60px\"\n    @cancel=\"$emit('input', false)\"\n    @confirm=\"confirm\"\n    @visible-change=\"visibleChange\"\n  >\n    <gs-loading\n      :is-show=\"loading\"\n    />\n    <gs-form\n      ref=\"form\"\n      :model=\"form\"\n      :rules=\"rules\"\n      label-width=\"80px\"\n    >\n      <gs-form-item\n        label=\"方案名称\"\n        prop=\"privilegeName\"\n      >\n        <gs-input v-model=\"form.privilegeName\" />\n      </gs-form-item>\n      <gs-form-item\n        label=\"描述\"\n        prop=\"description\"\n      >\n        <gs-textarea v-model=\"form.description\" />\n      </gs-form-item>\n      <gs-form-item\n        label=\"授权内容\"\n        prop=\"module\"\n      >\n        <div class=\"modules\">\n          <div class=\"module\">\n            <label class=\"title\">授权模块</label>\n            <gs-checkbox-group\n              v-model=\"form.modules\"\n              @change=\"authModuleCheckboxChange\"\n            >\n              <gs-checkbox\n                v-for=\"item in authModules\"\n                :label=\"item.moduleId\"\n                :key=\"item.moduleId\"\n              >{{ item.moduleName }}</gs-checkbox>\n            </gs-checkbox-group>\n          </div>\n          <div class=\"bussiness-obj-ope\">\n            <label class=\"title\">业务对象操作</label>\n            <gs-checkbox-group\n              v-model=\"form.modules\"\n              @change=\"opeModuleCheckboxChange\"\n            >\n              <gs-checkbox\n                v-for=\"item in opeModules\"\n                :label=\"item.moduleId\"\n                :key=\"item.moduleId\"\n              >{{ item.moduleName }}</gs-checkbox>\n            </gs-checkbox-group>\n          </div>\n        </div>\n      </gs-form-item>\n      <gs-form-item\n        label=\"授权角色\"\n        prop=\"roles\"\n      >\n        <gs-select\n          v-model=\"form.roles\"\n          multiple\n        >\n          <gs-option\n            v-for=\"item in roleOptions\"\n            :key=\"item.roleId\"\n            :label=\"item.roleName\"\n            :title=\"item.roleName\"\n            :value=\"item.roleId\"\n          />\n        </gs-select>\n      </gs-form-item>\n    </gs-form>\n  </gs-modal>\n</template>\n<script>\nimport * as service from 'src/service/auth/auth';\nexport default {\n  props: {\n    privilegeId: {\n      type: String,\n      default: ''\n    },\n    value: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      roleOptions: [],\n      form: {\n        modules: [],\n        description: '',\n        privilegeName: '',\n        roles: []\n      },\n      loading: false,\n      rules: {\n        privilegeName: [{required: true, message: '请填写方案名称', trigger: 'blur'}]\n      },\n      opeModules: [],\n      authModules: []\n    };\n  },\n  computed: {\n    visible: {\n      get() {\n        return this.value;\n      },\n      set(val) {\n        return val;\n      }\n    },\n    title() {\n      return this.privilegeId ? '编辑方案' : '添加方案';\n    }\n  },\n  methods: {\n    confirm() {\n      this.$refs.form.validate(valid => {\n        if (valid) {\n          if (this.privilegeId) {\n            this.$emit('editPrivilege', {\n              id: this.privilegeId,\n              params: this.form\n            });\n          } else {\n            this.$emit('addPrivilege', this.form);\n          }\n        }\n      });\n    },\n    visibleChange(val) {\n      if (val) {\n        this.loading = true;\n        this.$refs.form.clearValidate();\n        const getModules = () => {\n          return service.getModules().then(data => {\n            this.opeModules = data.filter(i => i.type === 0);\n            this.authModules = data.filter(i => i.type === 1);\n          });\n        };\n        const getRole = () => {\n          return service.getRoleList({limit: -1, query: ''}).then(data => {\n            this.roleOptions = data.lists;\n          });\n        };\n        this.form = {\n          modules: [],\n          description: '',\n          privilegeName: '',\n          roles: []\n        };\n        Promise.all([getModules(), getRole()]).then(_ => {\n          if (this.privilegeId) {\n            this.getPrivilegeDetail().then(_ => {\n              this.loading = false;\n            });\n          } else {\n            this.loading = false;\n          }\n        });\n      }\n    },\n    getPrivilegeDetail() {\n      return service.getPrivilegeDetail(this.privilegeId).then(data => {\n        const {description, privilegeName, modules, roles} = data;\n        this.form = {\n          description,\n          privilegeName,\n          modules: modules.map(i => i.moduleId),\n          roles: roles.map(i => i.roleId)\n        };\n      });\n    },\n    opeModuleCheckboxChange(val) {\n      if (Array.isArray(val)) {\n        this.form.modules = val.includes(3)\n          ? Array.from(new Set([1, 3, ...this.form.modules]))\n          : this.form.modules;\n        this.form.modules = val.includes(4)\n          ? Array.from(new Set([2, 4, ...this.form.modules]))\n          : this.form.modules;\n      }\n    },\n    authModuleCheckboxChange(val) {\n      if (!val.includes(1)) {\n        const removeItem = this.form.modules.findIndex(item => item === 3);\n        if (removeItem !== -1) this.form.modules.splice(removeItem, 1);\n      }\n      if (!val.includes(2)) {\n        const removeItem = this.form.modules.findIndex(item => item === 4);\n        if (removeItem !== -1) this.form.modules.splice(removeItem, 1);\n      }\n    }\n  }\n};\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// add-auth.vue?0b35530e","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('gs-modal', {\n    staticClass: \"add-auth\",\n    attrs: {\n      \"title\": _vm.title,\n      \"top\": \"60px\"\n    },\n    on: {\n      \"cancel\": function($event) {\n        _vm.$emit('input', false)\n      },\n      \"confirm\": _vm.confirm,\n      \"visible-change\": _vm.visibleChange\n    },\n    model: {\n      value: (_vm.visible),\n      callback: function($$v) {\n        _vm.visible = $$v\n      },\n      expression: \"visible\"\n    }\n  }, [_c('gs-loading', {\n    attrs: {\n      \"is-show\": _vm.loading\n    }\n  }), _vm._v(\" \"), _c('gs-form', {\n    ref: \"form\",\n    attrs: {\n      \"model\": _vm.form,\n      \"rules\": _vm.rules,\n      \"label-width\": \"80px\"\n    }\n  }, [_c('gs-form-item', {\n    attrs: {\n      \"label\": \"方案名称\",\n      \"prop\": \"privilegeName\"\n    }\n  }, [_c('gs-input', {\n    model: {\n      value: (_vm.form.privilegeName),\n      callback: function($$v) {\n        _vm.$set(_vm.form, \"privilegeName\", $$v)\n      },\n      expression: \"form.privilegeName\"\n    }\n  })], 1), _vm._v(\" \"), _c('gs-form-item', {\n    attrs: {\n      \"label\": \"描述\",\n      \"prop\": \"description\"\n    }\n  }, [_c('gs-textarea', {\n    model: {\n      value: (_vm.form.description),\n      callback: function($$v) {\n        _vm.$set(_vm.form, \"description\", $$v)\n      },\n      expression: \"form.description\"\n    }\n  })], 1), _vm._v(\" \"), _c('gs-form-item', {\n    attrs: {\n      \"label\": \"授权内容\",\n      \"prop\": \"module\"\n    }\n  }, [_c('div', {\n    staticClass: \"modules\"\n  }, [_c('div', {\n    staticClass: \"module\"\n  }, [_c('label', {\n    staticClass: \"title\"\n  }, [_vm._v(\"授权模块\")]), _vm._v(\" \"), _c('gs-checkbox-group', {\n    on: {\n      \"change\": _vm.authModuleCheckboxChange\n    },\n    model: {\n      value: (_vm.form.modules),\n      callback: function($$v) {\n        _vm.$set(_vm.form, \"modules\", $$v)\n      },\n      expression: \"form.modules\"\n    }\n  }, _vm._l((_vm.authModules), function(item) {\n    return _c('gs-checkbox', {\n      key: item.moduleId,\n      attrs: {\n        \"label\": item.moduleId\n      }\n    }, [_vm._v(_vm._s(item.moduleName))])\n  }), 1)], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"bussiness-obj-ope\"\n  }, [_c('label', {\n    staticClass: \"title\"\n  }, [_vm._v(\"业务对象操作\")]), _vm._v(\" \"), _c('gs-checkbox-group', {\n    on: {\n      \"change\": _vm.opeModuleCheckboxChange\n    },\n    model: {\n      value: (_vm.form.modules),\n      callback: function($$v) {\n        _vm.$set(_vm.form, \"modules\", $$v)\n      },\n      expression: \"form.modules\"\n    }\n  }, _vm._l((_vm.opeModules), function(item) {\n    return _c('gs-checkbox', {\n      key: item.moduleId,\n      attrs: {\n        \"label\": item.moduleId\n      }\n    }, [_vm._v(_vm._s(item.moduleName))])\n  }), 1)], 1)])]), _vm._v(\" \"), _c('gs-form-item', {\n    attrs: {\n      \"label\": \"授权角色\",\n      \"prop\": \"roles\"\n    }\n  }, [_c('gs-select', {\n    attrs: {\n      \"multiple\": \"\"\n    },\n    model: {\n      value: (_vm.form.roles),\n      callback: function($$v) {\n        _vm.$set(_vm.form, \"roles\", $$v)\n      },\n      expression: \"form.roles\"\n    }\n  }, _vm._l((_vm.roleOptions), function(item) {\n    return _c('gs-option', {\n      key: item.roleId,\n      attrs: {\n        \"label\": item.roleName,\n        \"title\": item.roleName,\n        \"value\": item.roleId\n      }\n    })\n  }), 1)], 1)], 1)], 1)\n}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-08e7c8de\",\"hasScoped\":false}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/auth/auth/add-auth.vue\n// module id = 2061\n// module chunks = 17","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"auth-mangement\"\n  }, [_c('div', {\n    staticClass: \"search-box\"\n  }, [_c('gs-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.openAddAuthModal\n    }\n  }, [_vm._v(\"添加方案\")]), _vm._v(\" \"), _c('gs-search', {\n    attrs: {\n      \"placeholder\": \"请输入方案名称\"\n    },\n    on: {\n      \"clear\": function($event) {\n        _vm.fetchAuthList(1)\n      },\n      \"search\": _vm.fetchAuthList\n    },\n    model: {\n      value: (_vm.keyword),\n      callback: function($$v) {\n        _vm.keyword = $$v\n      },\n      expression: \"keyword\"\n    }\n  })], 1), _vm._v(\" \"), _c('gs-table', {\n    directives: [{\n      name: \"loading\",\n      rawName: \"v-loading\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticStyle: {\n      \"width\": \"100%\"\n    },\n    attrs: {\n      \"data\": _vm.tableData,\n      \"pagination\": _vm.pagination,\n      \"paging\": \"\"\n    },\n    on: {\n      \"size-change\": _vm.sizeChange,\n      \"page-change\": _vm.pageChange\n    }\n  }, [_c('gs-table-column', {\n    attrs: {\n      \"prop\": \"privilegeName\",\n      \"label\": \"方案名称\"\n    }\n  }), _vm._v(\" \"), _c('gs-table-column', {\n    attrs: {\n      \"prop\": \"description\",\n      \"label\": \"描述\"\n    }\n  }), _vm._v(\" \"), _c('gs-table-column', {\n    attrs: {\n      \"prop\": \"roles\",\n      \"label\": \"授权角色\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('gs-table-tags', {\n          attrs: {\n            \"tags\": scope.row.role,\n            \"show-count\": 2\n          }\n        })]\n      }\n    }])\n  }), _vm._v(\" \"), _c('gs-table-column', {\n    attrs: {\n      \"label\": \"操作\",\n      \"width\": \"100\",\n      \"fixed\": \"right\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('gs-button', {\n          attrs: {\n            \"disabled\": !(!!scope.row.edit),\n            \"type\": \"text-primary\"\n          },\n          on: {\n            \"click\": function($event) {\n              _vm.openEditAuthModal(scope)\n            }\n          }\n        }, [_vm._v(\"编辑\")]), _vm._v(\" \"), _c('gs-button', {\n          attrs: {\n            \"disabled\": !(!!scope.row.delete),\n            \"type\": \"text-primary\"\n          },\n          on: {\n            \"click\": function($event) {\n              _vm.deleteAuth(scope)\n            }\n          }\n        }, [_vm._v(\"删除\")])]\n      }\n    }])\n  })], 1), _vm._v(\" \"), _c('add-auth', {\n    attrs: {\n      \"privilege-id\": _vm.editPrivilegeId\n    },\n    on: {\n      \"addPrivilege\": _vm.addPrivilege,\n      \"editPrivilege\": _vm.editPrivilege\n    },\n    model: {\n      value: (_vm.editModalVisible),\n      callback: function($$v) {\n        _vm.editModalVisible = $$v\n      },\n      expression: \"editModalVisible\"\n    }\n  })], 1)\n}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-78015ce5\",\"hasScoped\":false}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/auth/auth/index.vue\n// module id = 2062\n// module chunks = 17","import http from 'src/utils/http';\n\nexport function getPrivilegeList(params) {\n  return http.post(`/privilege/privileges`, params);\n}\nexport function deletePrivilege(privilegeId) {\n  return http.delete(`/privilege/${privilegeId}`);\n}\nexport function getPrivilegeDetail(privilegeId) {\n  return http.get(`/privilege/${privilegeId}`);\n}\nexport function getModules() {\n  return http.get(`/privilege/modules`);\n}\nexport function createPrivilege(form) {\n  return http.post(`/privilege`, form);\n}\nexport function editPrivilege(privilegeId, form) {\n  return http.put(`/privilege/${privilegeId}`, form);\n}\nexport function getRoleList(params) {\n  return http.post(`/privilege/roles`, params);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/service/auth/auth.js"],"sourceRoot":""}