{"version":3,"sources":["webpack:///./src/views/auth/auth/index.vue","webpack:///index.vue?d99e","webpack:///./src/views/auth/auth/add-auth.vue","webpack:///add-auth.vue","webpack:///./src/views/auth/auth/add-auth.vue?ad7d","webpack:///./src/views/auth/auth/index.vue?e49c","webpack:///./src/service/auth/auth.js"],"names":["Object","defineProperty","__webpack_exports__","value","__WEBPACK_IMPORTED_MODULE_0__happypack_loader_id_babel_node_modules_vue_loader_lib_selector_type_script_index_0_index_vue__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_78015ce5_hasScoped_false_node_modules_vue_loader_lib_selector_type_template_index_0_index_vue__","Component","normalizeComponent","components","addAuth","__WEBPACK_IMPORTED_MODULE_2__add_auth__","data","keyword","tableData","userId","username","account","roles","pagination","total","pageSize","pageSizes","current","loading","editPrivilegeId","editModalVisible","computed","created","this","fetchAuthList","methods","_this","arguments","length","undefined","__WEBPACK_IMPORTED_MODULE_1_src_service_auth_auth__","offset","limit","query","then","lists","map","item","role","i","roleName","sum","catch","e","pageChange","sizeChange","size","addPrivilege","form","_this2","$Message","success","editPrivilege","_ref","_this3","id","params","openEditAuthModal","_ref2","row","privilegeId","deleteAuth","_ref3","_this4","$Modal","confirm","title","content","onOk","warning","openAddAuthModal","__WEBPACK_IMPORTED_MODULE_0__happypack_loader_id_babel_node_modules_vue_loader_lib_selector_type_script_index_0_add_auth_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_08e7c8de_hasScoped_false_node_modules_vue_loader_lib_selector_type_template_index_0_add_auth_vue__","props","type","String","default","Boolean","roleOptions","modules","description","privilegeName","rules","required","message","trigger","opeModules","authModules","visible","get","set","val","$refs","validate","valid","$emit","visibleChange","clearValidate","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise___default","a","all","__WEBPACK_IMPORTED_MODULE_3_src_service_auth_auth__","filter","_","getPrivilegeDetail","moduleId","roleId","opeModuleCheckboxChange","Array","isArray","includes","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_array_from___default","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_set___default","concat","authModuleCheckboxChange","removeManage","findIndex","splice","removeEdit","_removeManage","_removeEdit","esExports","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","top","on","cancel","$event","visible-change","model","callback","$$v","expression","is-show","_v","ref","label-width","label","prop","$set","change","_l","key","_s","moduleName","multiple","staticRenderFns","click","placeholder","clear","search","directives","name","rawName","staticStyle","width","paging","size-change","page-change","scopedSlots","_u","fn","scope","tags","show-count","fixed","disabled","edit","delete","privilege-id","http","post","put","__WEBPACK_IMPORTED_MODULE_0_src_utils_http__"],"mappings":"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","file":"static/js/21.2de75399.js","sourcesContent":["var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!happypack/loader?id=babel!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-78015ce5\\\",\\\"hasScoped\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/auth/auth/index.vue\n// module id = 2082\n// module chunks = 21","<template>\r\n  <div class=\"auth-mangement\">\r\n    <div class=\"search-box\">\r\n      <gs-button\r\n        type=\"primary\"\r\n        @click=\"openAddAuthModal\"\r\n      >添加方案</gs-button>\r\n      <gs-search\r\n        v-model=\"keyword\"\r\n        placeholder=\"请输入方案名称\"\r\n        @clear=\"fetchAuthList(1)\"\r\n        @search=\"fetchAuthList\"\r\n      />\r\n    </div>\r\n    <gs-table\r\n      v-loading=\"loading\"\r\n      :data=\"tableData\"\r\n      :pagination=\"pagination\"\r\n      style=\"width: 100%\"\r\n      paging\r\n      @size-change=\"sizeChange\"\r\n      @page-change=\"pageChange\"\r\n    >\r\n      <gs-table-column\r\n        prop=\"privilegeName\"\r\n        label=\"方案名称\"\r\n      />\r\n      <gs-table-column\r\n        prop=\"description\"\r\n        label=\"描述\"\r\n      />\r\n      <gs-table-column\r\n        prop=\"roles\"\r\n        label=\"授权角色\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          <gs-table-tags\r\n            :tags=\"scope.row.role\"\r\n            :show-count=\"2\"\r\n          />\r\n        </template>\r\n      </gs-table-column>\r\n      <gs-table-column\r\n        label=\"操作\"\r\n        width=\"100\"\r\n        fixed=\"right\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          <gs-button\r\n            :disabled=\"!(!!scope.row.edit)\"\r\n            type=\"text-primary\"\r\n            @click=\"openEditAuthModal(scope)\"\r\n          >编辑</gs-button>\r\n          <gs-button\r\n            :disabled=\"!(!!scope.row.delete)\"\r\n            type=\"text-primary\"\r\n            @click=\"deleteAuth(scope)\"\r\n          >删除</gs-button>\r\n        </template>\r\n      </gs-table-column>\r\n    </gs-table>\r\n    <add-auth\r\n      :privilege-id=\"editPrivilegeId\"\r\n      v-model=\"editModalVisible\"\r\n      @addPrivilege=\"addPrivilege\"\r\n      @editPrivilege=\"editPrivilege\"\r\n    />\r\n  </div>\r\n</template>\r\n<script>\r\nimport './style';\r\nimport * as service from 'src/service/auth/auth';\r\nimport addAuth from './add-auth';\r\nexport default {\r\n  components: {\r\n    addAuth\r\n  },\r\n  data() {\r\n    return {\r\n      keyword: '',\r\n      tableData: [\r\n        {\r\n          userId: '1',\r\n          username: '1',\r\n          account: 'in',\r\n          roles: ['amet irure', '222']\r\n        }\r\n      ],\r\n      pagination: {\r\n        total: 0,\r\n        pageSize: 10,\r\n        pageSizes: [10, 20, 30],\r\n        current: 1\r\n      },\r\n      loading: false,\r\n      editPrivilegeId: '',\r\n      editModalVisible: false\r\n    };\r\n  },\r\n  computed: {\r\n\r\n  },\r\n\r\n  created() {\r\n    this.fetchAuthList(1);\r\n  },\r\n\r\n  methods: {\r\n    fetchAuthList(isfirstPage = 0) {\r\n      if (isfirstPage === 1) this.pagination.current = 1;\r\n      this.loading = true;\r\n      service.getPrivilegeList({\r\n        offset: (this.pagination.current - 1) * this.pagination.pageSize,\r\n        limit: this.pagination.pageSize,\r\n        query: this.keyword\r\n      }).then(data => {\r\n        data.lists.map(item => {\r\n          item.role = item.roles.map(i => i.roleName);\r\n          return item;\r\n        });\r\n        this.tableData = data.lists;\r\n        this.pagination.total = data.sum;\r\n        this.loading = false;\r\n      }).catch(e => {\r\n        this.loading = false;\r\n      });\r\n    },\r\n    pageChange(current) {\r\n      this.pagination.current = current;\r\n      this.fetchAuthList();\r\n    },\r\n    sizeChange(size) {\r\n      this.pagination.pageSize = size;\r\n      this.fetchAuthList(1);\r\n    },\r\n    addPrivilege(form) {\r\n      service.createPrivilege(form).then(data => {\r\n        this.fetchAuthList(1);\r\n        this.$Message.success('添加方案成功！');\r\n        this.editModalVisible = false;\r\n      });\r\n    },\r\n    editPrivilege({id, params}) {\r\n      service.editPrivilege(id, params).then(data => {\r\n        this.fetchAuthList();\r\n        this.$Message.success('修改方案成功！');\r\n        this.editModalVisible = false;\r\n      });\r\n    },\r\n    openEditAuthModal({row}) {\r\n      this.editPrivilegeId = row.privilegeId;\r\n      this.editModalVisible = true;\r\n    },\r\n    deleteAuth({row}) {\r\n      if (row.privilegeId && (!row.roles || (row.roles && !row.roles.length))) {\r\n        this.$Modal.confirm({\r\n          title: '警告',\r\n          content: '是否删除该权限方案？删除后将无法恢复',\r\n          onOk: () => {\r\n            service.deletePrivilege(row.privilegeId).then(data => {\r\n              this.$Message.success('删除权限方案成功');\r\n              this.fetchAuthList();\r\n            });\r\n          }\r\n        });\r\n      } else {\r\n        this.$Message.warning('请先全清空使用该权限方案的角色！');\r\n      }\r\n    },\r\n    openAddAuthModal() {\r\n      this.editPrivilegeId = '';\r\n      this.editModalVisible = true;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// index.vue?1857f23a","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!happypack/loader?id=babel!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./add-auth.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-08e7c8de\\\",\\\"hasScoped\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./add-auth.vue\"\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/auth/auth/add-auth.vue\n// module id = 2085\n// module chunks = 21","<template>\r\n  <gs-modal\r\n    :title=\"title\"\r\n    v-model=\"visible\"\r\n    class=\"add-auth\"\r\n    top=\"60px\"\r\n    @cancel=\"$emit('input', false)\"\r\n    @confirm=\"confirm\"\r\n    @visible-change=\"visibleChange\"\r\n  >\r\n    <gs-loading\r\n      :is-show=\"loading\"\r\n    />\r\n    <gs-form\r\n      ref=\"form\"\r\n      :model=\"form\"\r\n      :rules=\"rules\"\r\n      label-width=\"80px\"\r\n    >\r\n      <gs-form-item\r\n        label=\"方案名称\"\r\n        prop=\"privilegeName\"\r\n      >\r\n        <gs-input v-model=\"form.privilegeName\" />\r\n      </gs-form-item>\r\n      <gs-form-item\r\n        label=\"描述\"\r\n        prop=\"description\"\r\n      >\r\n        <gs-textarea v-model=\"form.description\" />\r\n      </gs-form-item>\r\n      <gs-form-item\r\n        label=\"授权内容\"\r\n        prop=\"module\"\r\n      >\r\n        <div class=\"modules\">\r\n          <div class=\"module\">\r\n            <label class=\"title\">授权模块</label>\r\n            <gs-checkbox-group\r\n              v-model=\"form.modules\"\r\n              @change=\"authModuleCheckboxChange\"\r\n            >\r\n              <gs-checkbox\r\n                v-for=\"item in authModules\"\r\n                :label=\"item.moduleId\"\r\n                :key=\"item.moduleId\"\r\n              >{{ item.moduleName }}</gs-checkbox>\r\n            </gs-checkbox-group>\r\n          </div>\r\n          <div class=\"bussiness-obj-ope\">\r\n            <label class=\"title\">业务对象操作</label>\r\n            <gs-checkbox-group\r\n              v-model=\"form.modules\"\r\n              @change=\"opeModuleCheckboxChange\"\r\n            >\r\n              <gs-checkbox\r\n                v-for=\"item in opeModules\"\r\n                :label=\"item.moduleId\"\r\n                :key=\"item.moduleId\"\r\n              >{{ item.moduleName }}</gs-checkbox>\r\n            </gs-checkbox-group>\r\n          </div>\r\n        </div>\r\n      </gs-form-item>\r\n      <gs-form-item\r\n        label=\"授权角色\"\r\n        prop=\"roles\"\r\n      >\r\n        <gs-select\r\n          v-model=\"form.roles\"\r\n          multiple\r\n        >\r\n          <gs-option\r\n            v-for=\"item in roleOptions\"\r\n            :key=\"item.roleId\"\r\n            :label=\"item.roleName\"\r\n            :title=\"item.roleName\"\r\n            :value=\"item.roleId\"\r\n          />\r\n        </gs-select>\r\n      </gs-form-item>\r\n    </gs-form>\r\n  </gs-modal>\r\n</template>\r\n<script>\r\nimport * as service from 'src/service/auth/auth';\r\nexport default {\r\n  props: {\r\n    privilegeId: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    value: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      roleOptions: [],\r\n      form: {\r\n        modules: [],\r\n        description: '',\r\n        privilegeName: '',\r\n        roles: []\r\n      },\r\n      loading: false,\r\n      rules: {\r\n        privilegeName: [{required: true, message: '请填写方案名称', trigger: 'blur'}]\r\n      },\r\n      opeModules: [],\r\n      authModules: []\r\n    };\r\n  },\r\n  computed: {\r\n    visible: {\r\n      get() {\r\n        return this.value;\r\n      },\r\n      set(val) {\r\n        return val;\r\n      }\r\n    },\r\n    title() {\r\n      return this.privilegeId ? '编辑方案' : '添加方案';\r\n    }\r\n  },\r\n  methods: {\r\n    confirm() {\r\n      this.$refs.form.validate(valid => {\r\n        if (valid) {\r\n          if (this.privilegeId) {\r\n            this.$emit('editPrivilege', {\r\n              id: this.privilegeId,\r\n              params: this.form\r\n            });\r\n          } else {\r\n            this.$emit('addPrivilege', this.form);\r\n          }\r\n        }\r\n      });\r\n    },\r\n    visibleChange(val) {\r\n      if (val) {\r\n        this.loading = true;\r\n        this.$refs.form.clearValidate();\r\n        const getModules = () => {\r\n          return service.getModules().then(data => {\r\n            this.opeModules = data.filter(i => i.type === 0);\r\n            this.authModules = data.filter(i => i.type === 1);\r\n          });\r\n        };\r\n        const getRole = () => {\r\n          return service.getRoleList({limit: -1, query: ''}).then(data => {\r\n            this.roleOptions = data.lists;\r\n          });\r\n        };\r\n        this.form = {\r\n          modules: [],\r\n          description: '',\r\n          privilegeName: '',\r\n          roles: []\r\n        };\r\n        Promise.all([getModules(), getRole()]).then(_ => {\r\n          if (this.privilegeId) {\r\n            this.getPrivilegeDetail().then(_ => {\r\n              this.loading = false;\r\n            });\r\n          } else {\r\n            this.loading = false;\r\n          }\r\n        });\r\n      }\r\n    },\r\n    getPrivilegeDetail() {\r\n      return service.getPrivilegeDetail(this.privilegeId).then(data => {\r\n        const {description, privilegeName, modules, roles} = data;\r\n        this.form = {\r\n          description,\r\n          privilegeName,\r\n          modules: modules.map(i => i.moduleId),\r\n          roles: roles.map(i => i.roleId)\r\n        };\r\n      });\r\n    },\r\n    opeModuleCheckboxChange(val) {\r\n      if (Array.isArray(val)) {\r\n        this.form.modules = val.includes(3)\r\n          ? Array.from(new Set([1, 3, ...this.form.modules]))\r\n          : this.form.modules;\r\n        this.form.modules = val.includes(8)\r\n          ? Array.from(new Set([1, 8, ...this.form.modules]))\r\n          : this.form.modules;\r\n        this.form.modules = val.includes(4)\r\n          ? Array.from(new Set([2, 4, ...this.form.modules]))\r\n          : this.form.modules;\r\n        this.form.modules = val.includes(9)\r\n          ? Array.from(new Set([2, 9, ...this.form.modules]))\r\n          : this.form.modules;\r\n      }\r\n    },\r\n    authModuleCheckboxChange(val) {\r\n      if (!val.includes(1)) {\r\n        const removeManage = this.form.modules.findIndex(item => item === 3);\r\n        if (removeManage !== -1) this.form.modules.splice(removeManage, 1);\r\n        const removeEdit = this.form.modules.findIndex(item => item === 8);\r\n        if (removeEdit !== -1) this.form.modules.splice(removeEdit, 1);\r\n      }\r\n      if (!val.includes(2)) {\r\n        const removeManage = this.form.modules.findIndex(item => item === 4);\r\n        if (removeManage !== -1) this.form.modules.splice(removeManage, 1);\r\n        const removeEdit = this.form.modules.findIndex(item => item === 9);\r\n        if (removeEdit !== -1) this.form.modules.splice(removeEdit, 1);\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// add-auth.vue?875be200","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('gs-modal', {\n    staticClass: \"add-auth\",\n    attrs: {\n      \"title\": _vm.title,\n      \"top\": \"60px\"\n    },\n    on: {\n      \"cancel\": function($event) {\n        return _vm.$emit('input', false)\n      },\n      \"confirm\": _vm.confirm,\n      \"visible-change\": _vm.visibleChange\n    },\n    model: {\n      value: (_vm.visible),\n      callback: function($$v) {\n        _vm.visible = $$v\n      },\n      expression: \"visible\"\n    }\n  }, [_c('gs-loading', {\n    attrs: {\n      \"is-show\": _vm.loading\n    }\n  }), _vm._v(\" \"), _c('gs-form', {\n    ref: \"form\",\n    attrs: {\n      \"model\": _vm.form,\n      \"rules\": _vm.rules,\n      \"label-width\": \"80px\"\n    }\n  }, [_c('gs-form-item', {\n    attrs: {\n      \"label\": \"方案名称\",\n      \"prop\": \"privilegeName\"\n    }\n  }, [_c('gs-input', {\n    model: {\n      value: (_vm.form.privilegeName),\n      callback: function($$v) {\n        _vm.$set(_vm.form, \"privilegeName\", $$v)\n      },\n      expression: \"form.privilegeName\"\n    }\n  })], 1), _vm._v(\" \"), _c('gs-form-item', {\n    attrs: {\n      \"label\": \"描述\",\n      \"prop\": \"description\"\n    }\n  }, [_c('gs-textarea', {\n    model: {\n      value: (_vm.form.description),\n      callback: function($$v) {\n        _vm.$set(_vm.form, \"description\", $$v)\n      },\n      expression: \"form.description\"\n    }\n  })], 1), _vm._v(\" \"), _c('gs-form-item', {\n    attrs: {\n      \"label\": \"授权内容\",\n      \"prop\": \"module\"\n    }\n  }, [_c('div', {\n    staticClass: \"modules\"\n  }, [_c('div', {\n    staticClass: \"module\"\n  }, [_c('label', {\n    staticClass: \"title\"\n  }, [_vm._v(\"授权模块\")]), _vm._v(\" \"), _c('gs-checkbox-group', {\n    on: {\n      \"change\": _vm.authModuleCheckboxChange\n    },\n    model: {\n      value: (_vm.form.modules),\n      callback: function($$v) {\n        _vm.$set(_vm.form, \"modules\", $$v)\n      },\n      expression: \"form.modules\"\n    }\n  }, _vm._l((_vm.authModules), function(item) {\n    return _c('gs-checkbox', {\n      key: item.moduleId,\n      attrs: {\n        \"label\": item.moduleId\n      }\n    }, [_vm._v(_vm._s(item.moduleName))])\n  }), 1)], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"bussiness-obj-ope\"\n  }, [_c('label', {\n    staticClass: \"title\"\n  }, [_vm._v(\"业务对象操作\")]), _vm._v(\" \"), _c('gs-checkbox-group', {\n    on: {\n      \"change\": _vm.opeModuleCheckboxChange\n    },\n    model: {\n      value: (_vm.form.modules),\n      callback: function($$v) {\n        _vm.$set(_vm.form, \"modules\", $$v)\n      },\n      expression: \"form.modules\"\n    }\n  }, _vm._l((_vm.opeModules), function(item) {\n    return _c('gs-checkbox', {\n      key: item.moduleId,\n      attrs: {\n        \"label\": item.moduleId\n      }\n    }, [_vm._v(_vm._s(item.moduleName))])\n  }), 1)], 1)])]), _vm._v(\" \"), _c('gs-form-item', {\n    attrs: {\n      \"label\": \"授权角色\",\n      \"prop\": \"roles\"\n    }\n  }, [_c('gs-select', {\n    attrs: {\n      \"multiple\": \"\"\n    },\n    model: {\n      value: (_vm.form.roles),\n      callback: function($$v) {\n        _vm.$set(_vm.form, \"roles\", $$v)\n      },\n      expression: \"form.roles\"\n    }\n  }, _vm._l((_vm.roleOptions), function(item) {\n    return _c('gs-option', {\n      key: item.roleId,\n      attrs: {\n        \"label\": item.roleName,\n        \"title\": item.roleName,\n        \"value\": item.roleId\n      }\n    })\n  }), 1)], 1)], 1)], 1)\n}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-08e7c8de\",\"hasScoped\":false}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/auth/auth/add-auth.vue\n// module id = 2087\n// module chunks = 21","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"auth-mangement\"\n  }, [_c('div', {\n    staticClass: \"search-box\"\n  }, [_c('gs-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.openAddAuthModal\n    }\n  }, [_vm._v(\"添加方案\")]), _vm._v(\" \"), _c('gs-search', {\n    attrs: {\n      \"placeholder\": \"请输入方案名称\"\n    },\n    on: {\n      \"clear\": function($event) {\n        return _vm.fetchAuthList(1)\n      },\n      \"search\": _vm.fetchAuthList\n    },\n    model: {\n      value: (_vm.keyword),\n      callback: function($$v) {\n        _vm.keyword = $$v\n      },\n      expression: \"keyword\"\n    }\n  })], 1), _vm._v(\" \"), _c('gs-table', {\n    directives: [{\n      name: \"loading\",\n      rawName: \"v-loading\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticStyle: {\n      \"width\": \"100%\"\n    },\n    attrs: {\n      \"data\": _vm.tableData,\n      \"pagination\": _vm.pagination,\n      \"paging\": \"\"\n    },\n    on: {\n      \"size-change\": _vm.sizeChange,\n      \"page-change\": _vm.pageChange\n    }\n  }, [_c('gs-table-column', {\n    attrs: {\n      \"prop\": \"privilegeName\",\n      \"label\": \"方案名称\"\n    }\n  }), _vm._v(\" \"), _c('gs-table-column', {\n    attrs: {\n      \"prop\": \"description\",\n      \"label\": \"描述\"\n    }\n  }), _vm._v(\" \"), _c('gs-table-column', {\n    attrs: {\n      \"prop\": \"roles\",\n      \"label\": \"授权角色\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('gs-table-tags', {\n          attrs: {\n            \"tags\": scope.row.role,\n            \"show-count\": 2\n          }\n        })]\n      }\n    }])\n  }), _vm._v(\" \"), _c('gs-table-column', {\n    attrs: {\n      \"label\": \"操作\",\n      \"width\": \"100\",\n      \"fixed\": \"right\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('gs-button', {\n          attrs: {\n            \"disabled\": !(!!scope.row.edit),\n            \"type\": \"text-primary\"\n          },\n          on: {\n            \"click\": function($event) {\n              return _vm.openEditAuthModal(scope)\n            }\n          }\n        }, [_vm._v(\"编辑\")]), _vm._v(\" \"), _c('gs-button', {\n          attrs: {\n            \"disabled\": !(!!scope.row.delete),\n            \"type\": \"text-primary\"\n          },\n          on: {\n            \"click\": function($event) {\n              return _vm.deleteAuth(scope)\n            }\n          }\n        }, [_vm._v(\"删除\")])]\n      }\n    }])\n  })], 1), _vm._v(\" \"), _c('add-auth', {\n    attrs: {\n      \"privilege-id\": _vm.editPrivilegeId\n    },\n    on: {\n      \"addPrivilege\": _vm.addPrivilege,\n      \"editPrivilege\": _vm.editPrivilege\n    },\n    model: {\n      value: (_vm.editModalVisible),\n      callback: function($$v) {\n        _vm.editModalVisible = $$v\n      },\n      expression: \"editModalVisible\"\n    }\n  })], 1)\n}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-78015ce5\",\"hasScoped\":false}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/auth/auth/index.vue\n// module id = 2088\n// module chunks = 21","import http from 'src/utils/http';\r\n\r\nexport function getPrivilegeList(params) {\r\n  return http.post(`/privilege/privileges`, params);\r\n}\r\nexport function deletePrivilege(privilegeId) {\r\n  return http.delete(`/privilege/${privilegeId}`);\r\n}\r\nexport function getPrivilegeDetail(privilegeId) {\r\n  return http.get(`/privilege/${privilegeId}`);\r\n}\r\nexport function getModules() {\r\n  return http.get(`/privilege/modules`);\r\n}\r\nexport function createPrivilege(form) {\r\n  return http.post(`/privilege`, form);\r\n}\r\nexport function editPrivilege(privilegeId, form) {\r\n  return http.put(`/privilege/${privilegeId}`, form);\r\n}\r\nexport function getRoleList(params) {\r\n  return http.post(`/privilege/roles`, params);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/service/auth/auth.js"],"sourceRoot":""}