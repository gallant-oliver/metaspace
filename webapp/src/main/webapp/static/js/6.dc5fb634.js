webpackJsonp([6],{468:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(745),s=a(753),n=a(47)(i.a,s.a,null,null,null);t.default=n.exports},499:function(e,t,a){"use strict";var i=a(500),s=a(503);a.n(s);t.a=i.a},500:function(e,t,a){"use strict";var i=a(501),s=a(502),n=a(47)(i.a,s.a,null,null,null);t.a=n.exports},501:function(e,t,a){"use strict";t.a={name:"BreadCrumb",props:{currentLevel:{type:String,required:!0},upperLevel:{type:String,default:""},backPath:{type:String,default:""}},data:function(){return{}},computed:{isHideNav:function(){return!!this.$router.currentRoute.query.nav}}}},502:function(e,t,a){"use strict";var i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return!e.upperLevel||e.isHideNav?a("div",{staticClass:"content-header-single"},[e._t("header",[e._v("\n    "+e._s(e.currentLevel)+"\n  ")])],2):a("div",{staticClass:"content-header-both"},[a("div",{staticClass:"back-link"},[a("router-link",{attrs:{to:e.backPath}},[a("gs-button",{staticClass:"back-btn",attrs:{type:"primary"}},[a("i",{staticClass:"gs-icon gs-icon-revoke"})])],1)],1),e._v(" "),a("div",{staticClass:"nav-name"},[a("div",{staticClass:"current-nav"},[e._v(e._s(e.currentLevel))]),e._v(" "),a("div",{staticClass:"upper-nav"},[e._v(e._s(e.upperLevel))])])])},staticRenderFns:[]};t.a=i},503:function(e,t){},624:function(e,t){},745:function(e,t,a){"use strict";var i=a(746),s=(a.n(i),a(747)),n=a(750),l=a(499),r=a(252),o=a(254),c=!1;t.a={name:"MetadataManagement",components:{TableFilter:s.a,FieldFilter:n.a,BreadCrumb:l.a},data:function(){return{refreshCache:!1,showViewType:0,filter:{keyword:"",type:0},options:[{value:0,label:"库"},{value:1,label:"表"},{value:2,label:"字段"}],table:{isLoading:!1,data:[],total:0,currentPage:1,pageSize:10,pageSizes:[10,20,30,40,50,100]}}},beforeRouteEnter:function(e,t,a){c=e.meta.keepAlive,a()},beforeRouteLeave:function(e,t,a){t.meta.keepAlive=!1,a()},activated:function(){!1===c&&(this.showViewType=0,this.filter.keyword="",this.filter.type=0,this.table.data=[],this.table.total=0,this.table.currentPage=1,this.table.pageSize=10,this.init())},mounted:function(){this.init()},methods:{init:function(){this.getMetaList(!0)},getClassName:function(e){return"DELETED"===e.row.status?"delete-status":""},closeAll:function(){var e=this;this.table.data.forEach(function(t){e.$refs.table.toggleRowExpansion(t,!1)})},toCreateView:function(){this.$router.push({path:"/main/metadata/create"})},toDetail:function(e){this.$router.push({path:"/main/metadata/detail/"+e})},handleExpandShow:function(){var e=this;this.$nextTick(function(){if(e.$refs.table){var t=[].slice.call(e.$refs.table.$el.querySelectorAll(".el-table__row"));e.table.data.forEach(function(e,a){e.tableList.length?t[a].querySelector(".el-table__expand-column .cell").style.visibility="visible":t[a].querySelector(".el-table__expand-column .cell").style.visibility="hidden"})}})},refreshData:function(){var e=this;this.refreshCache||(this.refreshCache=!0,o.a().then(function(t){e.handleSearch()}).catch(function(t){e.refreshCache=!1}))},handleSearch:function(){var e=this;switch(this.filter.type){case 0:this.showViewType=0,this.getMetaList(!this.refreshCache,this.refreshCache).then(function(t){e.refreshCache=!1});break;case 1:this.showViewType=1,this.$nextTick(function(){e.$refs["table-filter"].getListByTable(e.filter.keyword,e.refreshCache).then(function(t){e.refreshCache=!1})});break;case 2:this.showViewType=2,this.$nextTick(function(){e.$refs["field-filter"].getListByField(e.filter.keyword,e.refreshCache).then(function(t){e.refreshCache=!1})})}},getMetaList:function(e,t){var a=this;this.table.isLoading=!0,e&&(this.table.currentPage=1);var i=this.filter.keyword;return r.b({query:this.filter.keyword,offset:(this.table.currentPage-1)*this.table.pageSize,limit:this.table.pageSize}).then(function(e){a.filter.keyword===i&&(a.table.isLoading=!1,a.table.total=e.sum,e.lists.forEach(function(e){e.showTableList=e.tableList.slice(0,10)}),a.table.data=e.lists,a.handleExpandShow())}).catch(function(e){a.table.isLoading=!1})},showMore:function(e){var t;e.showTableList.length<e.tableList.length&&(t=e.showTableList).push.apply(t,e.tableList.slice(e.showTableList.length,e.showTableList.length+10))},pageChange:function(e){this.table.currentPage=e,this.getMetaList()},pageSizeChange:function(e){this.table.pageSize=e,this.table.currentPage=1,this.getMetaList()}}}},746:function(e,t){},747:function(e,t,a){"use strict";var i=a(748),s=a(749),n=a(47)(i.a,s.a,null,null,null);t.a=n.exports},748:function(e,t,a){"use strict";var i=a(624),s=(a.n(i),a(252));t.a={props:{refreshCache:{type:Boolean,default:!1}},data:function(){return{searchText:this.searchText,table:{isLoading:!1,data:[],total:0,currentPage:1,pageSize:10,pageSizes:[10,20,30,40,50,100]}}},mounted:function(){},methods:{getClassName:function(e){return"DELETED"===e.row.status?"delete-status":""},toTableDetail:function(e){this.$router.push({path:"/main/metadata/detail/"+e})},getListByTable:function(e,t){return this.searchText=e,this.getList(!t,t)},getList:function(e){var t=this;arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.table.isLoading=!0,e&&(this.table.currentPage=1);var a=this.searchText;return s.c({query:this.searchText,offset:(this.table.currentPage-1)*this.table.pageSize,limit:this.table.pageSize}).then(function(e){t.searchText===a&&(t.table.isLoading=!1,t.table.total=e.sum,t.table.data=e.lists)}).catch(function(e){t.table.isLoading=!1})},pageChange:function(e){this.table.currentPage=e,this.getList()},pageSizeChange:function(e){this.table.pageSize=e,this.table.currentPage=1,this.getList()}}}},749:function(e,t,a){"use strict";var i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"metadata-management-table-filter-page"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.table.isLoading||e.refreshCache,expression:"table.isLoading || refreshCache"}],staticClass:"relative"},[a("el-table",{ref:"table",attrs:{"row-class-name":e.getClassName,data:e.table.data}},[a("el-table-column",{attrs:{"class-name":"cell-filter-item"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("a",{on:{click:function(a){e.toTableDetail(t.row.tableId)}}},[a("i",{staticClass:"iconfont icon-biaoge icon-item"}),e._v(" "),a("span",{staticStyle:{"margin-left":"4px"}},[e._v(e._s(t.row.tableName))])])]),e._v(" "),a("div",[a("i",{staticClass:"iconfont icon-yuanshuju"}),e._v(" "),a("span",{staticStyle:{"margin-left":"4px"}},[e._v(e._s(t.row.databaseName))]),e._v(" "),a("i",{staticClass:"gs-icon-down",style:{transform:"rotate(-90deg)"}}),e._v(" "),a("i",{staticClass:"iconfont icon-biaoge icon-item"}),e._v(" "),a("span",{staticStyle:{"margin-left":"4px"}},[e._v(e._s(t.row.tableName))])])]}}])})],1),e._v(" "),a("gs-pagination",{directives:[{name:"show",rawName:"v-show",value:e.table.total>0,expression:"table.total>0"}],attrs:{current:e.table.currentPage,total:e.table.total,"page-size":e.table.pageSize,"page-sizes":e.table.pageSizes,layout:"range,total,pagesizes,pager,jumper,jumpbtn"},on:{"page-change":e.pageChange,"page-size-change":e.pageSizeChange}})],1)])},staticRenderFns:[]};t.a=i},750:function(e,t,a){"use strict";var i=a(751),s=a(752),n=a(47)(i.a,s.a,null,null,null);t.a=n.exports},751:function(e,t,a){"use strict";var i=a(624),s=(a.n(i),a(252));t.a={props:{refreshCache:{type:Boolean,default:!1}},data:function(){return{searchText:null,table:{isLoading:!1,data:[],total:0,currentPage:1,pageSize:10,pageSizes:[10,20,30,40,50,100]}}},mounted:function(){},methods:{getClassName:function(e){return"DELETED"===e.row.status?"delete-status":""},toTableFieldDetail:function(e){this.$router.push({path:"/main/metadata/detail/"+e,query:{module:"field"}})},getListByField:function(e,t){return this.searchText=e,this.getList(!t,t)},getList:function(e){var t=this;arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.table.isLoading=!0,e&&(this.table.currentPage=1);var a=this.searchText;return s.a({query:this.searchText,offset:(this.table.currentPage-1)*this.table.pageSize,limit:this.table.pageSize}).then(function(e){t.searchText===a&&(t.table.isLoading=!1,t.table.total=e.sum,t.table.data=e.lists)}).catch(function(e){t.table.isLoading=!1})},pageChange:function(e){this.table.currentPage=e,this.getList()},pageSizeChange:function(e){this.table.pageSize=e,this.table.currentPage=1,this.getList()}}}},752:function(e,t,a){"use strict";var i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"metadata-management-field-filter-page"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.table.isLoading||e.refreshCache,expression:"table.isLoading || refreshCache"}],staticClass:"relative"},[a("el-table",{ref:"table",attrs:{"row-class-name":e.getClassName,data:e.table.data}},[a("el-table-column",{attrs:{"class-name":"cell-filter-item"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("a",{on:{click:function(a){e.toTableFieldDetail(t.row.tableId)}}},[a("i",{staticClass:"iconfont icon-ziduantubiao"}),e._v(" "),a("span",{staticStyle:{"margin-left":"4px"}},[e._v(e._s(t.row.columnName))])])]),e._v(" "),a("div",[a("i",{staticClass:"iconfont icon-yuanshuju"}),e._v(" "),a("span",{staticStyle:{"margin-left":"4px"}},[e._v(e._s(t.row.databaseName))]),e._v(" "),a("i",{staticClass:"gs-icon-down",style:{transform:"rotate(-90deg)"}}),e._v(" "),a("i",{staticClass:"iconfont icon-biaoge icon-item"}),e._v(" "),a("span",{staticStyle:{"margin-left":"4px"}},[e._v(e._s(t.row.tableName))]),e._v(" "),a("i",{staticClass:"gs-icon-down",style:{transform:"rotate(-90deg)"}}),e._v(" "),a("i",{staticClass:"iconfont icon-ziduantubiao icon-item"}),e._v(" "),a("span",{staticStyle:{"margin-left":"4px"}},[e._v(e._s(t.row.columnName))])])]}}])})],1),e._v(" "),a("gs-pagination",{directives:[{name:"show",rawName:"v-show",value:e.table.total>0,expression:"table.total>0"}],attrs:{current:e.table.currentPage,total:e.table.total,"page-size":e.table.pageSize,"page-sizes":e.table.pageSizes,layout:"range,total,pagesizes,pager,jumper,jumpbtn"},on:{"page-change":e.pageChange,"page-size-change":e.pageSizeChange}})],1)])},staticRenderFns:[]};t.a=i},753:function(e,t,a){"use strict";var i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"metadata-management-page"},[a("div",{staticClass:"content-header"},[a("bread-crumb",{attrs:{"current-level":"元数据管理"}},[a("div",{staticClass:"bread-crumb-metadata-header",attrs:{slot:"header"},slot:"header"},[e._v("元数据管理\n        "),a("span",[a("a",{on:{click:e.refreshData}},[a("i",{staticClass:"iconfont icon-shuaxin2",class:{"animation-rotate":e.refreshCache}})])])])])],1),e._v(" "),a("div",{staticClass:"content-body"},[a("div",{staticClass:"filter-content"},[a("gs-button",{attrs:{type:"primary"},on:{click:e.toCreateView}},[e._v("新建离线表")]),e._v(" "),a("gs-button",{staticClass:"pull-right expand-all",attrs:{type:"text-primary"},on:{click:e.closeAll}},[e._v("全部收起")]),e._v(" "),a("div",{staticClass:"search-filter"},[a("gs-search",{attrs:{disabled:e.refreshCache,placeholder:"请输入搜索内容..."},on:{search:e.handleSearch},model:{value:e.filter.keyword,callback:function(t){e.$set(e.filter,"keyword",t)},expression:"filter.keyword"}},[a("template",{slot:"prepend"},[a("gs-select",{attrs:{disabled:e.refreshCache},model:{value:e.filter.type,callback:function(t){e.$set(e.filter,"type",t)},expression:"filter.type"}},e._l(e.options,function(e){return a("gs-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],2)],1)],1),e._v(" "),0===e.showViewType?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.table.isLoading||e.refreshCache,expression:"table.isLoading || refreshCache"}],staticClass:"relative db-list"},[a("el-table",{ref:"table",attrs:{"row-class-name":e.getClassName,data:e.table.data,stripe:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-table",{attrs:{"show-header":!1,"row-class-name":e.getClassName,data:t.row.showTableList,stripe:""}},[a("el-table-column",{attrs:{prop:"filename",label:"数据名称","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"iconfont icon-biaoge icon-item"}),e._v(" "),a("span",{staticStyle:{"margin-left":"4px"}},[e._v(e._s(t.row.tableName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"description",label:"描述","class-name":"expand-second-column","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"user",label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("gs-button",{attrs:{type:"text-primary"},on:{click:function(a){e.toDetail(t.row.tableId)}}},[e._v("详情")])]}}])})],1),e._v(" "),t.row.showTableList.length<t.row.tableList.length?a("div",{staticClass:"text-center show-more"},[a("gs-button",{on:{click:function(a){e.showMore(t.row)}}},[e._v("点击加载更多")])],1):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"数据名称","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"iconfont icon-yuanshuju"}),e._v(" "),a("span",{staticStyle:{"margin-left":"4px"}},[e._v(e._s(t.row.databaseName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"描述",prop:"databaseDescription","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("-")])]}}])})],1),e._v(" "),a("gs-pagination",{directives:[{name:"show",rawName:"v-show",value:e.table.total>0,expression:"table.total>0"}],attrs:{current:e.table.currentPage,total:e.table.total,"page-size":e.table.pageSize,"page-sizes":e.table.pageSizes,layout:"range,total,pagesizes,pager,jumper,jumpbtn"},on:{"page-change":e.pageChange,"page-size-change":e.pageSizeChange}})],1):e._e(),e._v(" "),1===e.showViewType?a("table-filter",{ref:"table-filter",attrs:{"refresh-cache":e.refreshCache}}):e._e(),e._v(" "),2===e.showViewType?a("field-filter",{ref:"field-filter",attrs:{"refresh-cache":e.refreshCache}}):e._e()],1)])},staticRenderFns:[]};t.a=i}});
//# sourceMappingURL=6.dc5fb634.js.map