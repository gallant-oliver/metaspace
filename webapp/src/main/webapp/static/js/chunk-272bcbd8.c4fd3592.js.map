{"version":3,"sources":["webpack:///./src/components/data-table/data-table.vue?c407","webpack:///src/components/data-table/data-table.vue","webpack:///./src/components/data-table/data-table.vue?b9e4","webpack:///./src/components/data-table/data-table.vue","webpack:///./src/components/data-table/index.js","webpack:///./src/service/auth/auth.js","webpack:///./src/views/auth/role/detail/index.vue?3033","webpack:///./src/views/auth/role/detail/authorize.vue?f831","webpack:///src/views/auth/role/detail/authorize.vue","webpack:///./src/views/auth/role/detail/authorize.vue?93bd","webpack:///./src/views/auth/role/detail/authorize.vue","webpack:///./src/views/auth/role/detail/member.vue?ff41","webpack:///src/views/auth/role/detail/member.vue","webpack:///./src/views/auth/role/detail/member.vue?bcee","webpack:///./src/views/auth/role/detail/member.vue","webpack:///src/views/auth/role/detail/index.vue","webpack:///./src/views/auth/role/detail/index.vue?dcbb","webpack:///./src/views/auth/role/detail/index.vue","webpack:///./src/service/auth/role.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_b","directives","name","rawName","value","expression","ref","on","sort-change","sortChange","selection-change","handleSelectionChange","tableProps","_t","attrs","page-sizes","layout","paginationProps","page-change","pageChange","page-size-change","pageSizeChange","staticRenderFns","data_tablevue_type_script_lang_js_","props","type","Object","default","loading","Boolean","methods","_ref","column","prop","order","$emit","selected","page","pageSize","clearSelection","$refs","dataTable","getTable","doLayout","data_table_data_tablevue_type_script_lang_js_","component","componentNormalizer","data_table","DataTable","__webpack_require__","d","__webpack_exports__","getPrivilegeList","deletePrivilege","getPrivilegeDetail","getModules","createPrivilege","editPrivilege","getRoleList","src_utils_http__WEBPACK_IMPORTED_MODULE_0__","params","http","post","privilegeId","delete","concat","get","form","put","model","callback","$$v","activeName","label","authorizevue_type_template_id_1a3a0bc0_render","_v","edit","popper-class","change","changePrivilegeOption","_l","item","key","privilegeName","_s","privilege","allowEdit","click","changePrivilege","cancel","modules","filter","i","moduleId","moduleName","some","data","technicalCategories","className","render-content","renderTree","node-key","includes","businessCategories","authorizevue_type_template_id_1a3a0bc0_staticRenderFns","authorizevue_type_script_lang_js_","storePrivilege","roleId","privilegesOptions","businessCheck","technicalCheck","created","$route","id","fetchRolePrivilege","_this","role","limit","query","then","lists","length","map","disabled","show","status","push","guid","technicalUnsortCategories","utils","businessUnsortCategories","JSON","parse","stringify","h","node","hide","categoryChange","bind","class","filterNode","tree","travel","children","setChildrenStatus","_this2","getCheckedKeys","categories","deepFlatten","arr","flatten","_ref2","apply","toConsumableArray","x","Array","isArray","$Message","success","_this3","auth","copyTechnicalTree","copyBusinessTree","detail_authorizevue_type_script_lang_js_","authorize","membervue_type_template_id_f9a1cd10_render","flex-end","staticStyle","justify-content","placeholder","clear","$event","fetchMemberList","search","keyword","table-props","tableData","pagination-props","pagination","sizeChange","selectionChange","fixed","show-overflow-tooltip","scopedSlots","_u","fn","scope","row","membervue_type_template_id_f9a1cd10_staticRenderFns","membervue_type_script_lang_js_","components","total","pageSizes","current","selection","computed","isfirstPage","arguments","undefined","offset","roles","roleName","sum","catch","e","size","removeMember","userId","$Modal","confirm","title","content","onOk","warning","val","detail_membervue_type_script_lang_js_","member_component","member","detailvue_type_script_lang_js_","role_detailvue_type_script_lang_js_","detail_component","deleteRole","getPrivileges","addRole","editRole","getMemberList","deleteMember","getRolePrivilege","changeRoleStatus","users","_ref3"],"mappings":"kHAAA,IAAAA,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,aAAwB,CAAAF,EAAA,WAAAJ,EAAAO,GAAA,CAAwBC,WAAA,EAAaC,KAAA,UAAAC,QAAA,YAAAC,MAAAX,EAAA,QAAAY,WAAA,YAA4EC,IAAA,YAAAC,GAAA,CAAsBC,cAAAf,EAAAgB,WAAAC,mBAAAjB,EAAAkB,wBAA2E,WAAAlB,EAAAmB,YAAA,IAAAnB,EAAAoB,GAAA,eAAAhB,EAAA,gBAAAJ,EAAAO,GAAA,CAAoFc,MAAA,CAAOC,aAAA,qBAAAC,OAAAvB,EAAAwB,gBAAAD,QAAA,8CAA2HT,GAAA,CAAKW,cAAAzB,EAAA0B,WAAAC,mBAAA3B,EAAA4B,iBAAoE,gBAAA5B,EAAAwB,iBAAA,SACnnBK,EAAA,GCqBAC,EAAA,CACAC,MAAA,CACAZ,WAAA,CACAa,KAAAC,OACAC,QAFA,WAGA,WAGAV,gBAAA,CACAQ,KAAAC,OACAC,QAFA,WAGA,WAGAC,QAAA,CACAH,KAAAI,QACAF,SAAA,IAIAG,QAAA,CACArB,WADA,SAAAsB,GACA,IAAAC,EAAAD,EAAAC,OAAAC,EAAAF,EAAAE,KAAAC,EAAAH,EAAAG,MACAxC,KAAAyC,MAAA,eAAAH,SAAAC,OAAAC,WAGAvB,sBALA,SAKAyB,GACA1C,KAAAyC,MAAA,mBAAAC,IAGAjB,WATA,SASAkB,GACA3C,KAAAyC,MAAA,cAAAE,IAGAhB,eAbA,SAaAiB,GACA5C,KAAAyC,MAAA,mBAAAG,IAGAC,eAjBA,WAkBA7C,KAAA8C,MAAAC,UAAAF,kBAGAG,SArBA,WAsBA,OAAAhD,KAAA8C,MAAAC,WAGAE,SAzBA,WA0BAjD,KAAA8C,MAAAC,UAAAE,cCpEmWC,EAAA,cCOnWC,EAAgBnB,OAAAoB,EAAA,KAAApB,CACdkB,EACApD,EACA8B,GACF,EACA,KACA,KACA,MAIeyB,EAAAF,UChBAG,8CCFfC,EAAAC,EAAAC,EAAA,sBAAAC,IAAAH,EAAAC,EAAAC,EAAA,sBAAAE,IAAAJ,EAAAC,EAAAC,EAAA,sBAAAG,IAAAL,EAAAC,EAAAC,EAAA,sBAAAI,IAAAN,EAAAC,EAAAC,EAAA,sBAAAK,IAAAP,EAAAC,EAAAC,EAAA,sBAAAM,IAAAR,EAAAC,EAAAC,EAAA,sBAAAO,IAAA,IAAAC,EAAAV,EAAA,QAEO,SAASG,EAAiBQ,GAC/B,OAAOC,OAAKC,KAAL,wBAAmCF,GAErC,SAASP,EAAgBU,GAC9B,OAAOF,OAAKG,OAAL,cAAAC,OAA0BF,IAE5B,SAAST,EAAmBS,GACjC,OAAOF,OAAKK,IAAL,cAAAD,OAAuBF,IAEzB,SAASR,IACd,OAAOM,OAAKK,IAAL,sBAEF,SAASV,EAAgBW,GAC9B,OAAON,OAAKC,KAAL,aAAwBK,GAE1B,SAASV,EAAcM,EAAaI,GACzC,OAAON,OAAKO,IAAL,cAAAH,OAAuBF,GAAeI,GAExC,SAAST,EAAYE,GAC1B,OAAOC,OAAKC,KAAL,mBAA8BF,8CCrBvC,IAAApE,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,eAA0B,CAAAF,EAAA,WAAgBiB,MAAA,CAAOW,KAAA,eAAqB4C,MAAA,CAAQjE,MAAAX,EAAA,WAAA6E,SAAA,SAAAC,GAAgD9E,EAAA+E,WAAAD,GAAmBlE,WAAA,eAA0B,CAAAR,EAAA,eAAoBiB,MAAA,CAAO2D,MAAA,KAAAvE,KAAA,WAA8B,CAAAL,EAAA,cAAAA,EAAA,eAAqCiB,MAAA,CAAO2D,MAAA,KAAAvE,KAAA,cAAiC,CAAAL,EAAA,0BAC3ZyB,EAAA,GCDIoD,EAAM,WAAgB,IAAAjF,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBI,WAAA,EAAaC,KAAA,UAAAC,QAAA,YAAAC,MAAAX,EAAA,QAAAY,WAAA,YAA4EN,YAAA,aAA0B,CAAAF,EAAA,OAAYE,YAAA,UAAqB,CAAAF,EAAA,OAAYE,YAAA,SAAoB,CAAAF,EAAA,QAAaE,YAAA,SAAoB,CAAAN,EAAAkF,GAAA,WAAAlF,EAAAmF,KAAA/E,EAAA,aAAyGE,YAAA,aAAAe,MAAA,CAAgC+D,eAAA,qBAAmCtE,GAAA,CAAKuE,OAAArF,EAAAsF,uBAAmCV,MAAA,CAAQjE,MAAAX,EAAA,YAAA6E,SAAA,SAAAC,GAAiD9E,EAAAsE,YAAAQ,GAAoBlE,WAAA,gBAA2BZ,EAAAuF,GAAAvF,EAAA,2BAAAwF,GAA+C,OAAApF,EAAA,aAAuBqF,IAAAD,EAAAlB,YAAAjD,MAAA,CAA4B2D,MAAAQ,EAAAE,cAAA/E,MAAA6E,EAAAlB,iBAAuD,GAArdlE,EAAA,QAAAJ,EAAAkF,GAAAlF,EAAA2F,GAAA3F,EAAA4F,UAAAF,mBAAqd,GAAAtF,EAAA,OAAmBE,YAAA,iBAA4B,CAAAF,EAAA,aAAkBI,WAAA,EAAaC,KAAA,OAAAC,QAAA,SAAAC,MAAAX,EAAA6F,YAAA7F,EAAAmF,KAAAvE,WAAA,uBAAgGS,MAAA,CAASW,KAAA,gBAAsBlB,GAAA,CAAKgF,MAAA9F,EAAAgE,gBAA2B,CAAAhE,EAAAkF,GAAA,0BAAA9E,EAAA,aAAmDI,WAAA,EAAaC,KAAA,OAAAC,QAAA,SAAAC,MAAAX,EAAA,KAAAY,WAAA,SAAgES,MAAA,CAASW,KAAA,gBAAsBlB,GAAA,CAAKgF,MAAA9F,EAAA+F,kBAA6B,CAAA/F,EAAAkF,GAAA,0BAAA9E,EAAA,aAAmDI,WAAA,EAAaC,KAAA,OAAAC,QAAA,SAAAC,MAAAX,EAAA,KAAAY,WAAA,SAAgES,MAAA,CAASW,KAAA,gBAAsBlB,GAAA,CAAKgF,MAAA9F,EAAAgG,SAAoB,CAAAhG,EAAAkF,GAAA,gCAAA9E,EAAA,OAAmDE,YAAA,QAAmB,CAAAF,EAAA,OAAYE,YAAA,QAAmB,CAAAF,EAAA,OAAYE,YAAA,oBAA+B,CAAAF,EAAA,OAAYE,YAAA,SAAoB,CAAAN,EAAAkF,GAAA,gCAAAlF,EAAAuF,GAAAvF,EAAA4F,UAAAK,QAAAC,OAAA,SAAAC,GAA4F,OAAAA,EAAAnE,QAAiB,YAAAwD,GAAwB,OAAApF,EAAA,KAAeqF,IAAAD,EAAAY,UAAkB,CAAAhG,EAAA,KAAUE,YAAA,kBAA4BN,EAAAkF,GAAAlF,EAAA2F,GAAAH,EAAAa,YAAA,mBAAiD,GAAAjG,EAAA,OAAgBE,YAAA,oBAA+B,CAAAF,EAAA,OAAYE,YAAA,SAAoB,CAAAN,EAAAkF,GAAA,gCAAAlF,EAAAuF,GAAAvF,EAAA4F,UAAAK,QAAAC,OAAA,SAAAC,GAA4F,OAAAA,EAAAnE,QAAkB,YAAAwD,GAAwB,OAAApF,EAAA,KAAeqF,IAAAD,EAAAY,UAAkB,CAAAhG,EAAA,KAAUE,YAAA,kBAA4BN,EAAAkF,GAAAlF,EAAA2F,GAAAH,EAAAa,YAAA,mBAAiD,KAAAjG,EAAA,OAAkBE,YAAA,SAAoB,CAAAF,EAAA,OAAYE,YAAA,SAAoB,CAAAN,EAAAkF,GAAA,4BAAA9E,EAAA,OAA+CE,YAAA,WAAsB,CAAAF,EAAA,OAAYI,WAAA,EAAaC,KAAA,OAAAC,QAAA,SAAAC,MAAAX,EAAA4F,UAAAK,QAAAK,KAAA,SAAAd,GAAgF,WAAAA,EAAAY,WAA8BxF,WAAA,uDAAmEN,YAAA,aAA0B,CAAAF,EAAA,OAAYE,YAAA,aAAwB,CAAAN,EAAAkF,GAAA,oCAAA9E,EAAA,WAA2DS,IAAA,gBAAAQ,MAAA,CAA2BkF,KAAAvG,EAAAwG,oBAAAzE,MAAA,CAC7lFiD,MAAA,OACAyB,UAAA,QACaC,iBAAA1G,EAAA2G,WAAAC,WAAA,WAAoD,GAAAxG,EAAA,OAAgBI,WAAA,EAAaC,KAAA,OAAAC,QAAA,SAAAC,MAAAX,EAAA4F,UAAAK,QAAAK,KAAA,SAAAd,GAAgF,YAAAqB,SAAArB,EAAAY,YAAyCxF,WAAA,mEAA+EN,YAAA,aAA0B,CAAAF,EAAA,OAAYE,YAAA,aAAwB,CAAAN,EAAAkF,GAAA,oCAAA9E,EAAA,WAA2DS,IAAA,eAAAQ,MAAA,CAA0BkF,KAAAvG,EAAA8G,mBAAA/E,MAAA,CACzbiD,MAAA,QACa0B,iBAAA1G,EAAA2G,WAAAC,WAAA,WAAoD,YAC7DG,EAAe,+DCwHnBC,EAAA,CACAT,KADA,WAEA,OACAX,UAAA,CACAF,cAAA,GACAO,QAAA,IAEAgB,eAAA,GACAC,OAAA,GACAV,oBAAA,GACAM,mBAAA,GACA3B,MAAA,EACAgC,kBAAA,GACA7C,YAAA,GACA8C,cAAA,GACAC,eAAA,GACAlF,SAAA,EACA0D,WAAA,IAGAyB,QApBA,WAqBArH,KAAAiH,OAAAjH,KAAAsH,OAAApD,OAAAqD,GACAvH,KAAAwH,sBAEApF,QAAA,CACAoF,mBADA,WACA,IAAAC,EAAAzH,KACAA,KAAAkC,SAAA,EACAwF,EAAA,MACAC,OAAA,EACAC,MAAA,KACAC,KAAA,SAAAvB,GACAmB,EAAAP,kBAAAZ,EAAAwB,QAEAJ,EAAA,KAAA1H,KAAAiH,QAAAY,KAAA,SAAAvB,GAEA,GADAmB,EAAA7B,YAAAU,EAAApB,KACAoB,EAAAC,qBAAAD,EAAAC,oBAAAwB,OAAA,CACAzB,EAAAC,oBAAAyB,IAAA,SAAAzC,GAGA,OAFAA,EAAA0C,UAAA1C,EAAA2C,KACA3C,EAAA4C,QAAAV,EAAAL,eAAAgB,KAAA7C,EAAA8C,MACA9C,IAEA,IAAA+C,EAAAtG,OAAAuG,EAAA,KAAAvG,CAAAsE,EAAAC,oBAAA,6BACAA,EAAAvE,OAAAuG,EAAA,KAAAvG,CAAAsG,EAAA,0DACAb,EAAAlB,oBAAAvE,OAAAuG,EAAA,KAAAvG,CAAAuE,GAAA,aAEA,GAAAD,EAAAO,oBAAAP,EAAAO,mBAAAkB,OAAA,CACAzB,EAAAO,mBAAAmB,IAAA,SAAAzC,GAGA,OAFAA,EAAA0C,UAAA1C,EAAA2C,KACA3C,EAAA4C,QAAAV,EAAAN,cAAAiB,KAAA7C,EAAA8C,MACA9C,IAEA,IAAAiD,EAAAxG,OAAAuG,EAAA,KAAAvG,CAAAsE,EAAAO,mBAAA,6BACAA,EAAA7E,OAAAuG,EAAA,KAAAvG,CAAAwG,EAAA,0DACAf,EAAAZ,mBAAA7E,OAAAuG,EAAA,KAAAvG,CAAA6E,GAAA,aAEAY,EAAApD,YAAAiC,EAAAX,UAAAtB,YACAoD,EAAA9B,UAAAW,EAAAX,UACA8B,EAAAT,eAAAyB,KAAAC,MAAAD,KAAAE,UAAArC,EAAAX,YACA8B,EAAAvF,SAAA,KAGAwE,WArCA,SAqCAkC,EArCAvG,GAqCAA,EAAAwG,KAAA,IAAAvC,EAAAjE,EAAAiE,KACApB,EAAAlF,KAAAkF,KACA,OACAoB,EAAAwC,KAAAF,EAAA,OAAAA,EAAA,QAGA1D,EAAA0D,EAAA,eAAAxH,MAAA,CAAAV,QAGA4F,EAAA6B,OAHAF,UAIA3B,EAAA4B,MAJArH,GAAA,CAAAuE,OAKApF,KAAA+I,eAAAC,KAAAhJ,KAAAsG,MAJAA,EAAA6B,OAAAS,EAAA,KAAAK,MAAA,uBAJAL,EAAA,QAUAtC,EAAA9F,UAIA0I,WAtDA,SAsDAC,GACA,SAAAC,EAAA9C,GAOA,OANAA,IAAAL,OAAA,SAAAC,GAIA,OAHAA,EAAAmD,WACAnD,EAAAmD,SAAAD,EAAAlD,EAAAmD,YAEAnD,EAAA4C,OAEAxC,EAEA,OAAA8C,EAAAD,IAEAJ,eAlEA,SAkEAzC,GACA,IAAAgD,EAAA,SAAAA,EAAAhD,EAAA6B,GACA7B,EAAA+C,UACA/C,EAAA+C,SAAArB,IAAA,SAAAzC,GACA,OAAAA,EAAA8D,UACA9D,EAAA4C,SACAmB,EAAA/D,EAAA4C,KAEA5C,EAAA4C,SACA5C,MAKAe,EAAA6B,OAAA,IAAA7B,EAAA6B,OAAA,IACAmB,EAAAhD,IAAA6B,SAEArC,gBAnFA,WAmFA,IAAAyD,EAAAvJ,KACAkE,EAAA,GACAA,EAAAyB,UAAA,CACAtB,YAAArE,KAAAqE,YACA2B,QAAAhG,KAAA2F,UAAAK,SAIA,IAAAwD,EAAA,SAAAC,GACA,SAAAC,EAAAC,GACA,IAAAC,EAAA,SAAAD,GAAA,IAAAE,EAAA,OAAAA,EAAA,IAAAtF,OAAAuF,MAAAD,EAAA7H,OAAA+H,EAAA,KAAA/H,CAAA2H,KACA,OAAAC,EAAAD,EAAA3B,IAAA,SAAAgC,GACA,OAAAC,MAAAC,QAAAF,EAAAX,WAAA,IAAAW,EAAA7B,OACA,GAAA5D,OAAAvC,OAAA+H,EAAA,KAAA/H,CAAAgI,GAAAhI,OAAA+H,EAAA,KAAA/H,CAAA0H,EAAAM,EAAAX,YAEAW,KAIA,OAAAN,EAAAD,GACAxD,OAAA,SAAAV,GAAA,WAAAA,EAAA4C,SACAH,IAAA,SAAAzC,GAAA,OAAAA,EAAA8C,QAEA9B,EAAAiD,EAAAxJ,KAAAuG,qBACAM,EAAA2C,EAAAxJ,KAAA6G,oBACAN,KAAAwB,SACA7D,EAAAqC,sBAAAyB,IAAA,SAAAzC,GACA,OACA8C,KAAA9C,EACA4C,OAAA,MAIAtB,KAAAkB,SACA7D,EAAA2C,qBAAAmB,IAAA,SAAAzC,GACA,OACA8C,KAAA9C,EACA4C,OAAA,MAIAT,EAAA,MACAxD,SACA+C,OAAAjH,KAAAiH,SACAY,KAAA,SAAAvB,GACAiD,EAAArE,MAAA,EACAqE,EAAAY,SAAAC,QAAA,QACAb,EAAA/B,wBAGAnC,sBArIA,SAqIA3E,GAAA,IAAA2J,EAAArK,KACAsK,EAAA,KAAA5J,GAAAmH,KAAA,SAAAvB,GACA+D,EAAA1E,UAAAK,QAAAM,EAAAN,WAGAD,OA1IA,WA2IA/F,KAAAkF,MAAA,EACAlF,KAAA2F,UAAA8C,KAAAC,MAAAD,KAAAE,UAAA3I,KAAAgH,iBACAhH,KAAAqE,YAAArE,KAAA2F,UAAAtB,YACArE,KAAAuG,oBAAAkC,KAAAC,MAAA1I,KAAAuK,mBACAvK,KAAA6G,mBAAA4B,KAAAC,MAAA1I,KAAAwK,mBAEAzG,cAjJA,WAkJA/D,KAAAkF,MAAA,EAGAlF,KAAAuK,kBAAA9B,KAAAE,UAAA3I,KAAAuG,qBACAvG,KAAAwK,iBAAA/B,KAAAE,UAAA3I,KAAA6G,uBC5SgY4D,EAAA,cCOhYtH,EAAgBnB,OAAAoB,EAAA,KAAApB,CACdyI,EACAzF,EACA8B,GACF,EACA,KACA,KACA,MAIe4D,EAAAvH,UClBXwH,EAAM,WAAgB,IAAA5K,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,UAAqB,CAAAF,EAAA,OAAYE,YAAA,aAAA4I,MAAA,CAAgC2B,WAAA,MAAA7K,EAAAkH,QAAiC4D,YAAA,CAAcC,kBAAA,aAA8B,CAAA3K,EAAA,aAAkBiB,MAAA,CAAO2J,YAAA,aAA0BlK,GAAA,CAAKmK,MAAA,SAAAC,GAAyB,OAAAlL,EAAAmL,gBAAA,IAA8BC,OAAApL,EAAAmL,iBAA8BvG,MAAA,CAAQjE,MAAAX,EAAA,QAAA6E,SAAA,SAAAC,GAA6C9E,EAAAqL,QAAAvG,GAAgBlE,WAAA,cAAuB,GAAAR,EAAA,cAAuBiB,MAAA,CAAOc,QAAAnC,EAAAmC,QAAAmJ,cAAA,CAAqC/E,KAAAvG,EAAAuL,WAAmBC,mBAAAxL,EAAAyL,YAAmC3K,GAAA,CAAKW,cAAAzB,EAAA0B,WAAAC,mBAAA3B,EAAA0L,WAAAzK,mBAAAjB,EAAA2L,kBAAuG,CAAAvL,EAAA,mBAAwBiB,MAAA,CAAOW,KAAA,YAAA4J,MAAA,MAA+BxL,EAAA,mBAAwBiB,MAAA,CAAOmB,KAAA,UAAAwC,MAAA,KAAA6G,wBAAA,MAA0DzL,EAAA,mBAAwBiB,MAAA,CAAOmB,KAAA,WAAAwC,MAAA,MAAA6G,wBAAA,MAA4DzL,EAAA,mBAAwBiB,MAAA,CAAOmB,KAAA,WAAAwC,MAAA,MAA+B8G,YAAA9L,EAAA+L,GAAA,EAAsBtG,IAAA,UAAAuG,GAAA,SAAAC,GAAiC,OAAAjM,EAAAuF,GAAA0G,EAAAC,IAAA,eAAA1G,GAA+C,OAAApF,EAAA,UAAoBqF,IAAAD,GAAS,CAAAxF,EAAAkF,GAAA,eAAAlF,EAAA2F,GAAAH,GAAA,yBAA2D,QAChrC2G,EAAe,2BCkEnBC,EAAA,CACAC,WAAA,CAEArJ,UAAAM,EAAA,MAEAiD,KALA,WAMA,OACA8E,QAAA,GACAE,UAAA,GAEAE,WAAA,CACAa,MAAA,EACAzJ,SAAA,GACA0J,UAAA,WACAC,QAAA,GAEArK,SAAA,EACAsK,UAAA,GACAvF,OAAA,KAGAwF,SAAA,GAIApF,QAzBA,WA0BArH,KAAAiH,OAAAjH,KAAAsH,OAAApD,OAAAqD,GACAvH,KAAAkL,gBAAA,IAGA9I,QAAA,CACA8I,gBADA,WACA,IAAAzD,EAAAzH,KAAA0M,EAAAC,UAAA5E,OAAA,QAAA6E,IAAAD,UAAA,GAAAA,UAAA,KACA,IAAAD,IAAA1M,KAAAwL,WAAAe,QAAA,GACAvM,KAAAkC,SAAA,EACAwF,EAAA,KAAA1H,KAAAiH,OAAA,CACA4F,QAAA7M,KAAAwL,WAAAe,QAAA,GAAAvM,KAAAwL,WAAA5I,SACA+E,MAAA3H,KAAAwL,WAAA5I,SACAgF,MAAA5H,KAAAoL,UACAvD,KAAA,SAAAvB,GACAA,EAAAwB,MAAAE,IAAA,SAAAzC,GAEA,OADAA,EAAAuH,MAAA,CAAAvH,EAAAwH,UACAxH,IAEAkC,EAAA6D,UAAAhF,EAAAwB,MACAL,EAAA+D,WAAAa,MAAA/F,EAAA0G,KAAA,EACAvF,EAAAvF,SAAA,IACA+K,MAAA,SAAAC,GACAzF,EAAAvF,SAAA,KAGAT,WApBA,SAoBA8K,GACAvM,KAAAwL,WAAAe,UACAvM,KAAAkL,mBAEAO,WAxBA,SAwBA0B,GACAnN,KAAAwL,WAAA5I,SAAAuK,EACAnN,KAAAkL,gBAAA,IAEAkC,aA5BA,WA4BA,IAAA7D,EAAAvJ,KACA,GAAAA,KAAAwM,UAAAzE,OAAA,CACA,IAAAsF,EAAArN,KAAAwM,UAAAxE,IAAA,SAAAzC,GAAA,OAAAA,EAAA8H,SACArN,KAAAsN,OAAAC,QAAA,CACAC,MAAA,KACAC,QAAA,mBACAC,KAAA,WACAhG,EAAA,KAAA6B,EAAAtC,OAAAoG,GAAAxF,KAAA,SAAAvB,GACAiD,EAAAY,SAAAC,QAAA,UACAb,EAAA2B,4BAKAlL,KAAAmK,SAAAwD,QAAA,UAGAjC,gBA7CA,SA6CAkC,GACA5N,KAAAwM,UAAAoB,KC/I6XC,EAAA,ECOzXC,EAAY9L,OAAAoB,EAAA,KAAApB,CACd6L,EACAlD,EACAuB,GACF,EACA,KACA,KACA,MAIe6B,EAAAD,UCMfE,EAAA,CACA5B,WAAA,CACA1B,YACAqD,UAEAzH,KALA,WAMA,OACAxB,WAAA,YC/B4XmJ,EAAA,ECOxXC,EAAYlM,OAAAoB,EAAA,KAAApB,CACdiM,EACAnO,EACA8B,GACF,EACA,KACA,KACA,MAIe6B,EAAA,WAAAyK,6CClBf3K,EAAAC,EAAAC,EAAA,sBAAAO,IAAAT,EAAAC,EAAAC,EAAA,sBAAA0K,IAAA5K,EAAAC,EAAAC,EAAA,sBAAA2K,IAAA7K,EAAAC,EAAAC,EAAA,sBAAA4K,IAAA9K,EAAAC,EAAAC,EAAA,sBAAA6K,IAAA/K,EAAAC,EAAAC,EAAA,sBAAA8K,IAAAhL,EAAAC,EAAAC,EAAA,sBAAA+K,IAAAjL,EAAAC,EAAAC,EAAA,sBAAAgL,IAAAlL,EAAAC,EAAAC,EAAA,sBAAAqC,IAAAvC,EAAAC,EAAAC,EAAA,sBAAAiL,IAAA,IAAAzK,EAAAV,EAAA,QAEO,SAASS,EAAYE,GAC1B,OAAOC,OAAKC,KAAL,cAAyBF,GAE3B,SAASiK,EAAWlH,GACzB,OAAO9C,OAAKG,OAAL,SAAAC,OAAqB0C,IAEvB,SAASmH,EAAclK,GAC5B,OAAOC,OAAKC,KAAL,mBAA8BF,GAEhC,SAASmK,EAAQnK,GACtB,OAAOC,OAAKC,KAAL,QAAmBF,GAErB,SAASoK,EAATjM,GAAoC,IAAjB6B,EAAiB7B,EAAjB6B,OAAQ+C,EAAS5E,EAAT4E,OAChC,OAAO9C,OAAKO,IAAL,SAAAH,OAAkB0C,GAAU/C,GAE9B,SAASqK,EAActH,EAAQ/C,GACpC,OAAOC,OAAKC,KAAL,SAAAG,OAAmB0C,EAAnB,UAAmC/C,GAErC,SAASsK,EAAavH,EAAQ0H,GACnC,OAAOxK,OAAKG,OAAL,SAAAC,OAAqB0C,EAArB,SAAoC,CAAEX,KAAMqI,IAK9C,SAASF,EAAiBxH,GAC/B,OAAO9C,OAAKK,IAAL,SAAAD,OAAkB0C,EAAlB,gBAEF,SAASnB,EAAT+D,GAA2C,IAAjB3F,EAAiB2F,EAAjB3F,OAAQ+C,EAAS4C,EAAT5C,OACvC,OAAO9C,OAAKO,IAAL,SAAAH,OAAkB0C,EAAlB,eAAuC/C,GAEzC,SAASwK,EAATE,GAA4C,IAAjB3H,EAAiB2H,EAAjB3H,OAAQkB,EAASyG,EAATzG,OACxC,OAAOhE,OAAKO,IAAL,SAAAH,OAAkB0C,EAAlB,KAAA1C,OAA4B4D","file":"static/js/chunk-272bcbd8.c4fd3592.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"data-list\"},[_c('el-table',_vm._b({directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"dataTable\",on:{\"sort-change\":_vm.sortChange,\"selection-change\":_vm.handleSelectionChange}},'el-table',_vm.tableProps,false),[_vm._t(\"default\")],2),_c('gs-pagination',_vm._b({attrs:{\"page-sizes\":[10, 20, 30, 40, 50, 100],\"layout\":_vm.paginationProps.layout || 'range,total,pagesizes,pager,jumper,jumpbtn'},on:{\"page-change\":_vm.pageChange,\"page-size-change\":_vm.pageSizeChange}},'gs-pagination',_vm.paginationProps,false))],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"data-list\">\r\n    <el-table\r\n      ref=\"dataTable\"\r\n      v-loading=\"loading\"\r\n      v-bind=\"tableProps\"\r\n      @sort-change=\"sortChange\"\r\n      @selection-change=\"handleSelectionChange\"\r\n    >\r\n      <slot />\r\n    </el-table>\r\n    <gs-pagination\r\n      v-bind=\"paginationProps\"\r\n      :page-sizes=\"[10, 20, 30, 40, 50, 100]\"\r\n      :layout=\"paginationProps.layout || 'range,total,pagesizes,pager,jumper,jumpbtn'\"\r\n      @page-change=\"pageChange\"\r\n      @page-size-change=\"pageSizeChange\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    tableProps: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      }\r\n    },\r\n    paginationProps: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      }\r\n    },\r\n    loading: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    sortChange({ column, prop, order }) {\r\n      this.$emit('sort-change', { column, prop, order });\r\n    },\r\n\r\n    handleSelectionChange(selected) {\r\n      this.$emit('selection-change', selected);\r\n    },\r\n\r\n    pageChange(page) {\r\n      this.$emit('page-change', page);\r\n    },\r\n\r\n    pageSizeChange(pageSize) {\r\n      this.$emit('page-size-change', pageSize);\r\n    },\r\n\r\n    clearSelection() {\r\n      this.$refs.dataTable.clearSelection();\r\n    },\r\n\r\n    getTable() {\r\n      return this.$refs.dataTable;\r\n    },\r\n\r\n    doLayout() {\r\n      this.$refs.dataTable.doLayout();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./data-table.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./data-table.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./data-table.vue?vue&type=template&id=8dae1a5c&\"\nimport script from \"./data-table.vue?vue&type=script&lang=js&\"\nexport * from \"./data-table.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import DataTable from './data-table.vue';\r\n\r\nexport default DataTable;\r\n","import http from 'src/utils/http';\r\n\r\nexport function getPrivilegeList(params) {\r\n  return http.post(`/privilege/privileges`, params);\r\n}\r\nexport function deletePrivilege(privilegeId) {\r\n  return http.delete(`/privilege/${privilegeId}`);\r\n}\r\nexport function getPrivilegeDetail(privilegeId) {\r\n  return http.get(`/privilege/${privilegeId}`);\r\n}\r\nexport function getModules() {\r\n  return http.get(`/privilege/modules`);\r\n}\r\nexport function createPrivilege(form) {\r\n  return http.post(`/privilege`, form);\r\n}\r\nexport function editPrivilege(privilegeId, form) {\r\n  return http.put(`/privilege/${privilegeId}`, form);\r\n}\r\nexport function getRoleList(params) {\r\n  return http.post(`/privilege/roles`, params);\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"role-detail\"},[_c('gs-tabs',{attrs:{\"type\":\"content-tab\"},model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},[_c('gs-tab-pane',{attrs:{\"label\":\"成员\",\"name\":\"member\"}},[_c('member')],1),_c('gs-tab-pane',{attrs:{\"label\":\"权限\",\"name\":\"authorize\"}},[_c('authorize')],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"authorize\"},[_c('div',{staticClass:\"header\"},[_c('div',{staticClass:\"title\"},[_c('span',{staticClass:\"label\"},[_vm._v(\"权限方案:\")]),(!_vm.edit)?_c('span',[_vm._v(_vm._s(_vm.privilege.privilegeName))]):_c('gs-select',{staticClass:\"doc-select\",attrs:{\"popper-class\":\"searchable-select\"},on:{\"change\":_vm.changePrivilegeOption},model:{value:(_vm.privilegeId),callback:function ($$v) {_vm.privilegeId=$$v},expression:\"privilegeId\"}},_vm._l((_vm.privilegesOptions),function(item){return _c('gs-option',{key:item.privilegeId,attrs:{\"label\":item.privilegeName,\"value\":item.privilegeId}})}),1)],1),_c('div',{staticClass:\"operation-box\"},[_c('gs-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.allowEdit && !_vm.edit),expression:\"allowEdit && !edit\"}],attrs:{\"type\":\"text-primary\"},on:{\"click\":_vm.editPrivilege}},[_vm._v(\"\\n        编辑\\n      \")]),_c('gs-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.edit),expression:\"edit\"}],attrs:{\"type\":\"text-primary\"},on:{\"click\":_vm.changePrivilege}},[_vm._v(\"\\n        确定\\n      \")]),_c('gs-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.edit),expression:\"edit\"}],attrs:{\"type\":\"text-primary\"},on:{\"click\":_vm.cancel}},[_vm._v(\"\\n        取消\\n      \")])],1)]),_c('div',{staticClass:\"wrap\"},[_c('div',{staticClass:\"left\"},[_c('div',{staticClass:\"authorize-module\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"\\n          授权模块\\n        \")]),_vm._l((_vm.privilege.modules.filter(function (i) { return i.type; }) || []),function(item){return _c('p',{key:item.moduleId},[_c('i',{staticClass:\"gs-icon-check\"}),_vm._v(_vm._s(item.moduleName)+\"\\n        \")])})],2),_c('div',{staticClass:\"business-obj-ope\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"\\n          管理权限\\n        \")]),_vm._l((_vm.privilege.modules.filter(function (i) { return !i.type; }) || []),function(item){return _c('p',{key:item.moduleId},[_c('i',{staticClass:\"gs-icon-check\"}),_vm._v(_vm._s(item.moduleName)+\"\\n        \")])})],2)]),_c('div',{staticClass:\"right\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"\\n        授权范围\\n      \")]),_c('div',{staticClass:\"wrapper\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.privilege.modules.some(function (item) { return item.moduleId === 1; })),expression:\"privilege.modules.some(item =>item.moduleId === 1)\"}],staticClass:\"technical\"},[_c('div',{staticClass:\"sub-title\"},[_vm._v(\"\\n            技术目录\\n          \")]),_c('gs-tree',{ref:\"technicalTree\",attrs:{\"data\":_vm.technicalCategories,\"props\":{\n              label: 'name',\n              className: 'hide'\n            },\"render-content\":_vm.renderTree,\"node-key\":\"guid\"}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.privilege.modules.some(function (item) { return [2, 5].includes(item.moduleId); })),expression:\"privilege.modules.some(item => [2, 5].includes(item.moduleId))\"}],staticClass:\"bussiness\"},[_c('div',{staticClass:\"sub-title\"},[_vm._v(\"\\n            业务目录\\n          \")]),_c('gs-tree',{ref:\"businessTree\",attrs:{\"data\":_vm.businessCategories,\"props\":{\n              label: 'name'\n            },\"render-content\":_vm.renderTree,\"node-key\":\"guid\"}})],1)])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div\r\n    v-loading=\"loading\"\r\n    class=\"authorize\"\r\n  >\r\n    <div class=\"header\">\r\n      <div class=\"title\">\r\n        <span class=\"label\">权限方案:</span>\r\n        <span v-if=\"!edit\">{{ privilege.privilegeName }}</span>\r\n        <gs-select\r\n          v-else\r\n          v-model=\"privilegeId\"\r\n          class=\"doc-select\"\r\n          popper-class=\"searchable-select\"\r\n          @change=\"changePrivilegeOption\"\r\n        >\r\n          <gs-option\r\n            v-for=\"item in privilegesOptions\"\r\n            :key=\"item.privilegeId\"\r\n            :label=\"item.privilegeName\"\r\n            :value=\"item.privilegeId\"\r\n          />\r\n        </gs-select>\r\n      </div>\r\n      <div class=\"operation-box\">\r\n        <gs-button\r\n          v-show=\"allowEdit && !edit\"\r\n          type=\"text-primary\"\r\n          @click=\"editPrivilege\"\r\n        >\r\n          编辑\r\n        </gs-button>\r\n        <gs-button\r\n          v-show=\"edit\"\r\n          type=\"text-primary\"\r\n          @click=\"changePrivilege\"\r\n        >\r\n          确定\r\n        </gs-button>\r\n        <gs-button\r\n          v-show=\"edit\"\r\n          type=\"text-primary\"\r\n          @click=\"cancel\"\r\n        >\r\n          取消\r\n        </gs-button>\r\n      </div>\r\n    </div>\r\n    <div class=\"wrap\">\r\n      <div class=\"left\">\r\n        <div class=\"authorize-module\">\r\n          <div class=\"title\">\r\n            授权模块\r\n          </div>\r\n          <p\r\n            v-for=\"item in privilege.modules.filter(i => i.type) || []\"\r\n            :key=\"item.moduleId\"\r\n          >\r\n            <i class=\"gs-icon-check\" />{{ item.moduleName }}\r\n          </p>\r\n        </div>\r\n        <div class=\"business-obj-ope\">\r\n          <div class=\"title\">\r\n            管理权限\r\n          </div>\r\n          <p\r\n            v-for=\"item in privilege.modules.filter(i => !i.type) || []\"\r\n            :key=\"item.moduleId\"\r\n          >\r\n            <i class=\"gs-icon-check\" />{{ item.moduleName }}\r\n          </p>\r\n        </div>\r\n      </div>\r\n      <div class=\"right\">\r\n        <div class=\"title\">\r\n          授权范围\r\n        </div>\r\n        <div class=\"wrapper\">\r\n          <div\r\n            v-show=\"privilege.modules.some(item =>item.moduleId === 1)\"\r\n            class=\"technical\"\r\n          >\r\n            <div class=\"sub-title\">\r\n              技术目录\r\n            </div>\r\n            <gs-tree\r\n              ref=\"technicalTree\"\r\n              :data=\"technicalCategories\"\r\n              :props=\"{\r\n                label: 'name',\r\n                className: 'hide'\r\n              }\"\r\n              :render-content=\"renderTree\"\r\n              node-key=\"guid\"\r\n            />\r\n          </div>\r\n          <div\r\n            v-show=\"privilege.modules.some(item => [2, 5].includes(item.moduleId))\"\r\n            class=\"bussiness\"\r\n          >\r\n            <div class=\"sub-title\">\r\n              业务目录\r\n            </div>\r\n            <gs-tree\r\n              ref=\"businessTree\"\r\n              :data=\"businessCategories\"\r\n              :props=\"{\r\n                label: 'name'\r\n              }\"\r\n              :render-content=\"renderTree\"\r\n              node-key=\"guid\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport {\r\n  list2tree,\r\n  sortTreeList,\r\n  deleteInTree\r\n} from 'src/utils';\r\nimport * as service from 'src/service/auth/role';\r\nimport * as authService from 'src/service/auth/auth';\r\nexport default {\r\n  data() {\r\n    return {\r\n      privilege: {\r\n        privilegeName: '',\r\n        modules: []\r\n      },\r\n      storePrivilege: {},\r\n      roleId: '',\r\n      technicalCategories: [],\r\n      businessCategories: [],\r\n      edit: false,\r\n      privilegesOptions: [],\r\n      privilegeId: '',\r\n      businessCheck: [],\r\n      technicalCheck: [],\r\n      loading: false,\r\n      allowEdit: false\r\n    };\r\n  },\r\n  created() {\r\n    this.roleId = this.$route.params.id;\r\n    this.fetchRolePrivilege();\r\n  },\r\n  methods: {\r\n    fetchRolePrivilege() {\r\n      this.loading = true;\r\n      service.getPrivileges({\r\n        limit: -1,\r\n        query: ''\r\n      }).then(data => {\r\n        this.privilegesOptions = data.lists;\r\n      });\r\n      service.getRolePrivilege(this.roleId).then(data => {\r\n        this.allowEdit = !!(data.edit);\r\n        if (data.technicalCategories && data.technicalCategories.length) {\r\n          data.technicalCategories.map(item => {\r\n            item.disabled = !item.show;\r\n            item.status && this.technicalCheck.push(item.guid);\r\n            return item;\r\n          });\r\n          const technicalUnsortCategories = list2tree(data.technicalCategories, 'guid', 'parentCategoryGuid');\r\n          const technicalCategories = sortTreeList(technicalUnsortCategories, 'guid', 'upBrotherCategoryGuid', 'downBrotherCategoryGuid');\r\n          this.technicalCategories = deleteInTree(technicalCategories, true, 'hide', false);\r\n        }\r\n        if (data.businessCategories && data.businessCategories.length) {\r\n          data.businessCategories.map(item => {\r\n            item.disabled = !item.show;\r\n            item.status && this.businessCheck.push(item.guid);\r\n            return item;\r\n          });\r\n          const businessUnsortCategories = list2tree(data.businessCategories, 'guid', 'parentCategoryGuid');\r\n          const businessCategories = sortTreeList(businessUnsortCategories, 'guid', 'upBrotherCategoryGuid', 'downBrotherCategoryGuid');\r\n          this.businessCategories = deleteInTree(businessCategories, true, 'hide', false); ;\r\n        }\r\n        this.privilegeId = data.privilege.privilegeId;\r\n        this.privilege = data.privilege;\r\n        this.storePrivilege = JSON.parse(JSON.stringify(data.privilege));\r\n        this.loading = false;\r\n      });\r\n    },\r\n    renderTree(h, { node, data }) {\r\n      const { edit } = this;\r\n      return (\r\n        data.hide\r\n          ? <div></div>\r\n          : <span>\r\n            {(!edit)\r\n              ? (data.status ? <i class=\"gs-icon-check\"></i> : null)\r\n              : <gs-checkbox\r\n                value={!!data.status}\r\n                disabled={!data.show}\r\n                on-change={this.categoryChange.bind(this, data)}\r\n              ></gs-checkbox>}\r\n            <span>{data.name}</span>\r\n          </span>\r\n      );\r\n    },\r\n    filterNode(tree) {\r\n      function travel(data) {\r\n        data = data.filter(i => {\r\n          if (i.children) {\r\n            i.children = travel(i.children);\r\n          };\r\n          return !i.hide;\r\n        });\r\n        return data;\r\n      }\r\n      return travel(tree);\r\n    },\r\n    categoryChange(data) {\r\n      const setChildrenStatus = (data, status) => {\r\n        if (data.children) {\r\n          data.children.map(item => {\r\n            if (item.children) {\r\n              item.status = status;\r\n              return setChildrenStatus(item, status);\r\n            } else {\r\n              item.status = status;\r\n              return item;\r\n            }\r\n          });\r\n        }\r\n      };\r\n      data.status = data.status === 1 ? 0 : 1;\r\n      setChildrenStatus(data, data.status);\r\n    },\r\n    changePrivilege() {\r\n      const params = {};\r\n      params.privilege = {\r\n        privilegeId: this.privilegeId,\r\n        modules: this.privilege.modules\r\n      };\r\n      // const technicalCategories = this.$refs.technicalTree.getCheckedKeys(true);\r\n      // const businessCategories = this.$refs.businessTree.getCheckedKeys(true);\r\n      const getCheckedKeys = (categories) => {\r\n        function deepFlatten(arr) {\r\n          const flatten = (arr) => [].concat(...arr);\r\n          return flatten(arr.map(x => {\r\n            if (Array.isArray(x.children) && x.status === 0) {\r\n              return [...x, ...deepFlatten(x.children)];\r\n            } else {\r\n              return x;\r\n            }\r\n          }));\r\n        }\r\n        return deepFlatten(categories)\r\n          .filter(item => item.status === 1)\r\n          .map(item => item.guid);\r\n      };\r\n      const technicalCategories = getCheckedKeys(this.technicalCategories);\r\n      const businessCategories = getCheckedKeys(this.businessCategories);\r\n      if (technicalCategories && technicalCategories.length) {\r\n        params.technicalCategories = technicalCategories.map(item => {\r\n          return {\r\n            guid: item,\r\n            status: 1\r\n          };\r\n        });\r\n      }\r\n      if (businessCategories && businessCategories.length) {\r\n        params.businessCategories = businessCategories.map(item => {\r\n          return {\r\n            guid: item,\r\n            status: 1\r\n          };\r\n        });\r\n      }\r\n      service.changePrivilege({\r\n        params,\r\n        roleId: this.roleId\r\n      }).then(data => {\r\n        this.edit = false;\r\n        this.$Message.success('修改成功');\r\n        this.fetchRolePrivilege();\r\n      });\r\n    },\r\n    changePrivilegeOption(value) {\r\n      authService.getPrivilegeDetail(value).then(data => {\r\n        this.privilege.modules = data.modules;\r\n      });\r\n    },\r\n    cancel() {\r\n      this.edit = false;\r\n      this.privilege = JSON.parse(JSON.stringify(this.storePrivilege));\r\n      this.privilegeId = this.privilege.privilegeId;\r\n      this.technicalCategories = JSON.parse(this.copyTechnicalTree);\r\n      this.businessCategories = JSON.parse(this.copyBusinessTree);\r\n    },\r\n    editPrivilege() {\r\n      this.edit = true;\r\n      // this.$refs.technicalTree.setCheckedKeys(this.technicalCheck);\r\n      // this.$refs.businessTree.setCheckedKeys(this.businessCheck);\r\n      this.copyTechnicalTree = JSON.stringify(this.technicalCategories);\r\n      this.copyBusinessTree = JSON.stringify(this.businessCategories);\r\n    }\r\n  }\r\n};\r\n</script>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./authorize.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./authorize.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./authorize.vue?vue&type=template&id=1a3a0bc0&\"\nimport script from \"./authorize.vue?vue&type=script&lang=js&\"\nexport * from \"./authorize.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"member\"},[_c('div',{staticClass:\"search-box\",class:{ 'flex-end': _vm.roleId === '1' },staticStyle:{\"justify-content\":\"flex-end\"}},[_c('gs-search',{attrs:{\"placeholder\":\"请输入用户名或帐号\"},on:{\"clear\":function($event){return _vm.fetchMemberList(1)},\"search\":_vm.fetchMemberList},model:{value:(_vm.keyword),callback:function ($$v) {_vm.keyword=$$v},expression:\"keyword\"}})],1),_c('data-table',{attrs:{\"loading\":_vm.loading,\"table-props\":{data:_vm.tableData},\"pagination-props\":_vm.pagination},on:{\"page-change\":_vm.pageChange,\"page-size-change\":_vm.sizeChange,\"selection-change\":_vm.selectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"fixed\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"account\",\"label\":\"帐号\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"username\",\"label\":\"用户名\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"roleName\",\"label\":\"角色\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _vm._l((scope.row.roles),function(item){return _c('gs-tag',{key:item},[_vm._v(\"\\n          \"+_vm._s(item)+\"\\n        \")])})}}])})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"member\">\r\n    <div\r\n      :class=\"{ 'flex-end': roleId === '1' }\"\r\n      class=\"search-box\"\r\n      style=\"justify-content: flex-end;\"\r\n    >\r\n      <!-- <div\r\n      :class=\"{ 'flex-end': roleId === '1' }\"\r\n      class=\"search-box\"\r\n    >\r\n      <add-member\r\n        v-if=\"roleId !== '1'\"\r\n        :role-id=\"roleId\"\r\n        @removeMember=\"removeMember\"\r\n        @addMember=\"addMember\"\r\n      /> -->\r\n      <gs-search\r\n        v-model=\"keyword\"\r\n        placeholder=\"请输入用户名或帐号\"\r\n        @clear=\"fetchMemberList(1)\"\r\n        @search=\"fetchMemberList\"\r\n      />\r\n    </div>\r\n    <data-table\r\n      :loading=\"loading\"\r\n      :table-props=\"{data:tableData}\"\r\n      :pagination-props=\"pagination\"\r\n      @page-change=\"pageChange\"\r\n      @page-size-change=\"sizeChange\"\r\n      @selection-change=\"selectionChange\"\r\n    >\r\n      <el-table-column\r\n        type=\"selection\"\r\n        fixed\r\n      />\r\n      <el-table-column\r\n        prop=\"account\"\r\n        label=\"帐号\"\r\n        show-overflow-tooltip\r\n      />\r\n      <el-table-column\r\n        prop=\"username\"\r\n        label=\"用户名\"\r\n        show-overflow-tooltip\r\n      />\r\n      <el-table-column\r\n        prop=\"roleName\"\r\n        label=\"角色\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          <gs-tag\r\n            v-for=\"item in scope.row.roles\"\r\n            :key=\"item\"\r\n          >\r\n            {{ item }}\r\n          </gs-tag>\r\n        </template>\r\n      </el-table-column>\r\n    </data-table>\r\n  </div>\r\n</template>\r\n<script>\r\nimport './style.scss';\r\n// import addMember from './add-member';\r\nimport * as service from 'src/service/auth/role';\r\nimport dataTable from 'src/components/data-table';\r\nexport default {\r\n  components: {\r\n    // addMember,\r\n    dataTable\r\n  },\r\n  data() {\r\n    return {\r\n      keyword: '',\r\n      tableData: [\r\n      ],\r\n      pagination: {\r\n        total: 0,\r\n        pageSize: 10,\r\n        pageSizes: [10, 20, 30],\r\n        current: 1\r\n      },\r\n      loading: false,\r\n      selection: [],\r\n      roleId: ''\r\n    };\r\n  },\r\n  computed: {\r\n\r\n  },\r\n\r\n  created() {\r\n    this.roleId = this.$route.params.id;\r\n    this.fetchMemberList(1);\r\n  },\r\n\r\n  methods: {\r\n    fetchMemberList(isfirstPage = 0) {\r\n      if (isfirstPage === 1) this.pagination.current = 1;\r\n      this.loading = true;\r\n      service.getMemberList(this.roleId, {\r\n        offset: (this.pagination.current - 1) * this.pagination.pageSize,\r\n        limit: this.pagination.pageSize,\r\n        query: this.keyword\r\n      }).then(data => {\r\n        data.lists.map(item => {\r\n          item.roles = [item.roleName];\r\n          return item;\r\n        });\r\n        this.tableData = data.lists;\r\n        this.pagination.total = data.sum || 0;\r\n        this.loading = false;\r\n      }).catch(e => {\r\n        this.loading = false;\r\n      });\r\n    },\r\n    pageChange(current) {\r\n      this.pagination.current = current;\r\n      this.fetchMemberList();\r\n    },\r\n    sizeChange(size) {\r\n      this.pagination.pageSize = size;\r\n      this.fetchMemberList(1);\r\n    },\r\n    removeMember() {\r\n      if (this.selection.length) {\r\n        const userId = this.selection.map(item => item.userId);\r\n        this.$Modal.confirm({\r\n          title: '警告',\r\n          content: '是否删除该成员？删除后将无法恢复',\r\n          onOk: () => {\r\n            service.deleteMember(this.roleId, userId).then(data => {\r\n              this.$Message.success('删除成员成功');\r\n              this.fetchMemberList();\r\n            });\r\n          }\r\n        });\r\n      } else {\r\n        this.$Message.warning(`请选择成员`);\r\n      }\r\n    },\r\n    selectionChange(val) {\r\n      this.selection = val;\r\n    }\r\n    // addMember(val) {\r\n    //   service.addMember(this.roleId, val).then(data => {\r\n    //     this.$Message.success('添加成员成功');\r\n    //     this.fetchMemberList(1);\r\n    //   });\r\n    // }\r\n  }\r\n};\r\n</script>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./member.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./member.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./member.vue?vue&type=template&id=f9a1cd10&\"\nimport script from \"./member.vue?vue&type=script&lang=js&\"\nexport * from \"./member.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"role-detail\">\r\n    <gs-tabs\r\n      v-model=\"activeName\"\r\n      type=\"content-tab\"\r\n    >\r\n      <gs-tab-pane\r\n        label=\"成员\"\r\n        name=\"member\"\r\n      >\r\n        <member />\r\n      </gs-tab-pane>\r\n      <gs-tab-pane\r\n        label=\"权限\"\r\n        name=\"authorize\"\r\n      >\r\n        <authorize />\r\n      </gs-tab-pane>\r\n    </gs-tabs>\r\n  </div>\r\n</template>\r\n<script>\r\nimport authorize from './authorize';\r\nimport member from './member';\r\nexport default {\r\n  components: {\r\n    authorize,\r\n    member\r\n  },\r\n  data() {\r\n    return {\r\n      activeName: 'member'\r\n    };\r\n  }\r\n};\r\n</script>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=539287e8&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import http from 'src/utils/http';\r\n\r\nexport function getRoleList(params) {\r\n  return http.post(`/role/roles`, params);\r\n}\r\nexport function deleteRole(roleId) {\r\n  return http.delete(`/role/${roleId}`);\r\n}\r\nexport function getPrivileges(params) {\r\n  return http.post(`/role/privileges`, params);\r\n}\r\nexport function addRole(params) {\r\n  return http.post(`/role`, params);\r\n}\r\nexport function editRole({params, roleId}) {\r\n  return http.put(`/role/${roleId}`, params);\r\n}\r\nexport function getMemberList(roleId, params) {\r\n  return http.post(`/role/${roleId}/users`, params);\r\n}\r\nexport function deleteMember(roleId, users) {\r\n  return http.delete(`/role/${roleId}/user`, { data: users });\r\n}\r\nexport function addMember(roleId, users) {\r\n  return http.post(`role/${roleId}/user`, users);\r\n}\r\nexport function getRolePrivilege(roleId) {\r\n  return http.get(`/role/${roleId}/privileges`);\r\n}\r\nexport function changePrivilege({params, roleId}) {\r\n  return http.put(`/role/${roleId}/privileges`, params);\r\n}\r\nexport function changeRoleStatus({roleId, status}) {\r\n  return http.put(`/role/${roleId}/${status}`);\r\n}\r\nexport function getAllMemberList(roleId, params) {\r\n  return http.post(`/role/users/${roleId}`, params);\r\n}\r\n"],"sourceRoot":""}