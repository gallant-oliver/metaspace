{"version":3,"sources":["webpack:///./src/views/auth/role/index.vue","webpack:///index.vue?67c2","webpack:///./src/views/auth/role/add-role.vue","webpack:///add-role.vue","webpack:///./src/views/auth/role/add-role.vue?ee3e","webpack:///./src/views/auth/role/index.vue?78c8","webpack:///./src/service/auth/role.js"],"names":["Object","defineProperty","__webpack_exports__","value","__WEBPACK_IMPORTED_MODULE_0__happypack_loader_id_babel_node_modules_vue_loader_lib_selector_type_script_index_0_index_vue__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_3723539a_hasScoped_false_node_modules_vue_loader_lib_selector_type_template_index_0_index_vue__","Component","normalizeComponent","components","addRole","__WEBPACK_IMPORTED_MODULE_1__add_role__","data","keyword","tableData","pagination","total","pageSize","pageSizes","current","loading","computed","created","this","fetchRoleList","methods","_this","arguments","length","undefined","__WEBPACK_IMPORTED_MODULE_2_src_service_auth_role__","offset","limit","query","then","lists","map","item","description","members","privilegeName","updateTime","sum","catch","e","pageChange","sizeChange","size","checkDetail","_ref","row","roleId","$router","push","deleteRole","_ref2","_this2","$Modal","confirm","title","content","onOk","$Message","success","changeRoleStatus","_ref3","_this3","status","__WEBPACK_IMPORTED_MODULE_0__happypack_loader_id_babel_node_modules_vue_loader_lib_selector_type_script_index_0_add_role_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_33b18351_hasScoped_false_node_modules_vue_loader_lib_selector_type_template_index_0_add_role_vue__","visible","form","roleName","privilegeId","privilegesOptions","rules","required","message","trigger","openAddRoleModal","$refs","validate","valid","__WEBPACK_IMPORTED_MODULE_0_src_service_auth_role__","$emit","visibleChange","val","clearValidate","esExports","render","_vm","_h","$createElement","_c","_self","attrs","type","on","click","_v","visible-change","model","callback","$$v","expression","ref","label-width","label","prop","$set","staticClass","searchable","popper-class","_l","key","staticRenderFns","refreshRoleList","placeholder","clear","$event","search","directives","name","rawName","staticStyle","width","paging","size-change","page-change","show-overflow-tooltip","fixed","scopedSlots","_u","fn","scope","disabled","disable","_e","delete","params","http","post","users","get","put","__WEBPACK_IMPORTED_MODULE_0_src_utils_http__"],"mappings":"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","file":"static/js/16.b9fcddb3.js","sourcesContent":["var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!happypack/loader?id=babel!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3723539a\\\",\\\"hasScoped\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/auth/role/index.vue\n// module id = 1822\n// module chunks = 16","<template>\r\n  <div class=\"role-mangement\">\r\n    <div class=\"search-box\">\r\n      <add-role\r\n        @refreshRoleList=\"fetchRoleList\"\r\n      />\r\n      <gs-search\r\n        v-model=\"keyword\"\r\n        placeholder=\"请输入角色名称\"\r\n        @clear=\"fetchRoleList(1)\"\r\n        @search=\"fetchRoleList\"\r\n      />\r\n    </div>\r\n    <gs-table\r\n      v-loading=\"loading\"\r\n      :data=\"tableData\"\r\n      :pagination=\"pagination\"\r\n      style=\"width: 100%\"\r\n      paging\r\n      @size-change=\"sizeChange\"\r\n      @page-change=\"pageChange\"\r\n    >\r\n      <gs-table-column\r\n        prop=\"roleName\"\r\n        label=\"角色名称\"\r\n        show-overflow-tooltip\r\n      />\r\n      <gs-table-column\r\n        prop=\"description\"\r\n        label=\"描述\"\r\n        show-overflow-tooltip\r\n      />\r\n      <gs-table-column\r\n        prop=\"members\"\r\n        label=\"人数\"\r\n      />\r\n      <gs-table-column\r\n        prop=\"privilegeName\"\r\n        label=\"权限方案\"\r\n        show-overflow-tooltip\r\n      />\r\n      <gs-table-column\r\n        prop=\"updateTime\"\r\n        label=\"更新时间\"\r\n      />\r\n      <gs-table-column\r\n        label=\"操作\"\r\n        width=\"160\"\r\n        fixed=\"right\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          <gs-button\r\n            type=\"text-primary\"\r\n            @click=\"checkDetail(scope)\"\r\n          >详情</gs-button>\r\n          <gs-button\r\n            v-if=\"!!(scope.row.status)\"\r\n            :disabled=\"!!(!scope.row.disable)\"\r\n            type=\"text-primary\"\r\n            @click=\"changeRoleStatus(scope)\"\r\n          >禁用</gs-button>\r\n          <gs-button\r\n            v-if=\"!!(!scope.row.status)\"\r\n            :disabled=\"!!(!scope.row.disable)\"\r\n            type=\"text-primary\"\r\n            @click=\"changeRoleStatus(scope)\"\r\n          >启用</gs-button>\r\n          <gs-button\r\n            :disabled=\"!!(!scope.row.delete)\"\r\n            type=\"text-primary\"\r\n            @click=\"deleteRole(scope)\"\r\n          >删除</gs-button>\r\n        </template>\r\n      </gs-table-column>\r\n    </gs-table>\r\n  </div>\r\n</template>\r\n<script>\r\nimport './style';\r\nimport addRole from './add-role';\r\nimport * as service from 'src/service/auth/role';\r\nexport default {\r\n  components: {\r\n    addRole\r\n  },\r\n  data() {\r\n    return {\r\n      keyword: '',\r\n      tableData: [\r\n      ],\r\n      pagination: {\r\n        total: 0,\r\n        pageSize: 10,\r\n        pageSizes: [10, 20, 30],\r\n        current: 1\r\n      },\r\n      loading: false\r\n    };\r\n  },\r\n  computed: {\r\n\r\n  },\r\n\r\n  created() {\r\n    this.fetchRoleList(1);\r\n  },\r\n\r\n  methods: {\r\n    fetchRoleList(isfirstPage = 0) {\r\n      if (isfirstPage === 1) this.pagination.current = 1;\r\n      this.loading = true;\r\n      service.getRoleList({\r\n        offset: (this.pagination.current - 1) * this.pagination.pageSize,\r\n        limit: this.pagination.pageSize,\r\n        query: this.keyword\r\n      }).then(data => {\r\n        data.lists.map(item => {\r\n          item.description = item.description || '-';\r\n          item.members = item.members || '0';\r\n          item.privilegeName = item.privilegeName || '-';\r\n          item.updateTime = item.updateTime || '-';\r\n          return item;\r\n        });\r\n        this.tableData = data.lists;\r\n        this.pagination.total = data.sum || 0;\r\n        this.loading = false;\r\n      }).catch(e => {\r\n        this.loading = false;\r\n      });\r\n    },\r\n    pageChange(current) {\r\n      this.pagination.current = current;\r\n      this.fetchRoleList();\r\n    },\r\n    sizeChange(size) {\r\n      this.pagination.pageSize = size;\r\n      this.fetchRoleList(1);\r\n    },\r\n    checkDetail({row}) {\r\n      row.roleId && this.$router.push(`/main/auth/roleManagement/${row.roleId}`);\r\n    },\r\n    deleteRole({row}) {\r\n      if (row.roleId) {\r\n        this.$Modal.confirm({\r\n          title: '警告',\r\n          content: '是否删除该角色？删除后将无法恢复',\r\n          onOk: () => {\r\n            service.deleteRole(row.roleId).then(data => {\r\n              this.$Message.success('删除角色成功');\r\n              this.fetchRoleList();\r\n            });\r\n          }\r\n        });\r\n      }\r\n    },\r\n    changeRoleStatus({row}) {\r\n      this.$Modal.confirm({\r\n        title: '警告',\r\n        content: `确定要${row.status === 0 ? '启用' : '禁用'}该角色吗？`,\r\n        onOk: () => {\r\n          service.changeRoleStatus({\r\n            roleId: row.roleId,\r\n            status: row.status === 0 ? 1 : 0\r\n          }).then(data => {\r\n            this.$Message.success(`${row.status === 0 ? '启用' : '禁用'}角色成功`);\r\n            this.fetchRoleList();\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// index.vue?36a0784f","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!happypack/loader?id=babel!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./add-role.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-33b18351\\\",\\\"hasScoped\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./add-role.vue\"\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/auth/role/add-role.vue\n// module id = 1825\n// module chunks = 16","<template>\r\n  <div>\r\n    <gs-button\r\n      type=\"primary\"\r\n      @click=\"openAddRoleModal\"\r\n    >新建角色</gs-button>\r\n    <gs-modal\r\n      :title=\"title\"\r\n      v-model=\"visible\"\r\n      @visible-change=\"visibleChange\"\r\n      @confirm=\"addRole\"\r\n    >\r\n      <gs-form\r\n        ref=\"form\"\r\n        :model=\"form\"\r\n        :rules=\"rules\"\r\n        label-width=\"80px\"\r\n      >\r\n        <gs-form-item\r\n          label=\"角色名称\"\r\n          prop=\"roleName\"\r\n        >\r\n          <gs-input v-model=\"form.roleName\" />\r\n        </gs-form-item>\r\n        <gs-form-item\r\n          label=\"描述\"\r\n          prop=\"description\"\r\n        >\r\n          <gs-textarea v-model=\"form.description\" />\r\n        </gs-form-item>\r\n        <gs-form-item\r\n          label=\"技术方案\"\r\n          prop=\"privilegeId\"\r\n        >\r\n          <gs-select\r\n            v-model=\"form.privilegeId\"\r\n            class=\"doc-select\"\r\n            searchable\r\n            popper-class=\"searchable-select\"\r\n          >\r\n            <gs-option\r\n              v-for=\"item in privilegesOptions\"\r\n              :key=\"item.privilegeId\"\r\n              :label=\"item.privilegeName\"\r\n              :value=\"item.privilegeId\"\r\n            />\r\n          </gs-select>\r\n        </gs-form-item>\r\n      </gs-form>\r\n    </gs-modal>\r\n  </div>\r\n</template>\r\n<script>\r\nimport * as service from 'src/service/auth/role';\r\nexport default {\r\n  data() {\r\n    return {\r\n      visible: false,\r\n      form: {\r\n        roleName: '',\r\n        description: '',\r\n        privilegeId: ''\r\n      },\r\n      privilegesOptions: [],\r\n      rules: {\r\n        roleName: [{ required: true, message: '请填写角色名称', trigger: 'blur' }],\r\n        privilegeId: [{ required: true, message: '请选择技术方案', trigger: 'change' }]\r\n      }\r\n    };\r\n  },\r\n  computed: {\r\n    title() {\r\n      return '新建角色';\r\n    }\r\n  },\r\n  methods: {\r\n    openAddRoleModal() {\r\n      this.visible = true;\r\n    },\r\n    addRole() {\r\n      this.$refs.form.validate(valid => {\r\n        if (valid) {\r\n          service.addRole(this.form).then(data => {\r\n            this.visible = false;\r\n            this.$Message.success(`添加成功`);\r\n            this.$emit('refreshRoleList');\r\n          }).catch(e => {\r\n          });\r\n        }\r\n      });\r\n    },\r\n    visibleChange(val) {\r\n      if (val) {\r\n        this.$refs.form.clearValidate();\r\n        service.getPrivileges({\r\n          limit: -1,\r\n          query: '',\r\n          offset: 0\r\n        }).then(data => {\r\n          this.privilegesOptions = data.lists;\r\n        });\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// add-role.vue?6ede55a6","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('gs-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.openAddRoleModal\n    }\n  }, [_vm._v(\"新建角色\")]), _vm._v(\" \"), _c('gs-modal', {\n    attrs: {\n      \"title\": _vm.title\n    },\n    on: {\n      \"visible-change\": _vm.visibleChange,\n      \"confirm\": _vm.addRole\n    },\n    model: {\n      value: (_vm.visible),\n      callback: function($$v) {\n        _vm.visible = $$v\n      },\n      expression: \"visible\"\n    }\n  }, [_c('gs-form', {\n    ref: \"form\",\n    attrs: {\n      \"model\": _vm.form,\n      \"rules\": _vm.rules,\n      \"label-width\": \"80px\"\n    }\n  }, [_c('gs-form-item', {\n    attrs: {\n      \"label\": \"角色名称\",\n      \"prop\": \"roleName\"\n    }\n  }, [_c('gs-input', {\n    model: {\n      value: (_vm.form.roleName),\n      callback: function($$v) {\n        _vm.$set(_vm.form, \"roleName\", $$v)\n      },\n      expression: \"form.roleName\"\n    }\n  })], 1), _vm._v(\" \"), _c('gs-form-item', {\n    attrs: {\n      \"label\": \"描述\",\n      \"prop\": \"description\"\n    }\n  }, [_c('gs-textarea', {\n    model: {\n      value: (_vm.form.description),\n      callback: function($$v) {\n        _vm.$set(_vm.form, \"description\", $$v)\n      },\n      expression: \"form.description\"\n    }\n  })], 1), _vm._v(\" \"), _c('gs-form-item', {\n    attrs: {\n      \"label\": \"技术方案\",\n      \"prop\": \"privilegeId\"\n    }\n  }, [_c('gs-select', {\n    staticClass: \"doc-select\",\n    attrs: {\n      \"searchable\": \"\",\n      \"popper-class\": \"searchable-select\"\n    },\n    model: {\n      value: (_vm.form.privilegeId),\n      callback: function($$v) {\n        _vm.$set(_vm.form, \"privilegeId\", $$v)\n      },\n      expression: \"form.privilegeId\"\n    }\n  }, _vm._l((_vm.privilegesOptions), function(item) {\n    return _c('gs-option', {\n      key: item.privilegeId,\n      attrs: {\n        \"label\": item.privilegeName,\n        \"value\": item.privilegeId\n      }\n    })\n  }))], 1)], 1)], 1)], 1)\n}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-33b18351\",\"hasScoped\":false}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/auth/role/add-role.vue\n// module id = 1827\n// module chunks = 16","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"role-mangement\"\n  }, [_c('div', {\n    staticClass: \"search-box\"\n  }, [_c('add-role', {\n    on: {\n      \"refreshRoleList\": _vm.fetchRoleList\n    }\n  }), _vm._v(\" \"), _c('gs-search', {\n    attrs: {\n      \"placeholder\": \"请输入角色名称\"\n    },\n    on: {\n      \"clear\": function($event) {\n        _vm.fetchRoleList(1)\n      },\n      \"search\": _vm.fetchRoleList\n    },\n    model: {\n      value: (_vm.keyword),\n      callback: function($$v) {\n        _vm.keyword = $$v\n      },\n      expression: \"keyword\"\n    }\n  })], 1), _vm._v(\" \"), _c('gs-table', {\n    directives: [{\n      name: \"loading\",\n      rawName: \"v-loading\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticStyle: {\n      \"width\": \"100%\"\n    },\n    attrs: {\n      \"data\": _vm.tableData,\n      \"pagination\": _vm.pagination,\n      \"paging\": \"\"\n    },\n    on: {\n      \"size-change\": _vm.sizeChange,\n      \"page-change\": _vm.pageChange\n    }\n  }, [_c('gs-table-column', {\n    attrs: {\n      \"prop\": \"roleName\",\n      \"label\": \"角色名称\",\n      \"show-overflow-tooltip\": \"\"\n    }\n  }), _vm._v(\" \"), _c('gs-table-column', {\n    attrs: {\n      \"prop\": \"description\",\n      \"label\": \"描述\",\n      \"show-overflow-tooltip\": \"\"\n    }\n  }), _vm._v(\" \"), _c('gs-table-column', {\n    attrs: {\n      \"prop\": \"members\",\n      \"label\": \"人数\"\n    }\n  }), _vm._v(\" \"), _c('gs-table-column', {\n    attrs: {\n      \"prop\": \"privilegeName\",\n      \"label\": \"权限方案\",\n      \"show-overflow-tooltip\": \"\"\n    }\n  }), _vm._v(\" \"), _c('gs-table-column', {\n    attrs: {\n      \"prop\": \"updateTime\",\n      \"label\": \"更新时间\"\n    }\n  }), _vm._v(\" \"), _c('gs-table-column', {\n    attrs: {\n      \"label\": \"操作\",\n      \"width\": \"160\",\n      \"fixed\": \"right\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('gs-button', {\n          attrs: {\n            \"type\": \"text-primary\"\n          },\n          on: {\n            \"click\": function($event) {\n              _vm.checkDetail(scope)\n            }\n          }\n        }, [_vm._v(\"详情\")]), _vm._v(\" \"), (!!(scope.row.status)) ? _c('gs-button', {\n          attrs: {\n            \"disabled\": !!(!scope.row.disable),\n            \"type\": \"text-primary\"\n          },\n          on: {\n            \"click\": function($event) {\n              _vm.changeRoleStatus(scope)\n            }\n          }\n        }, [_vm._v(\"禁用\")]) : _vm._e(), _vm._v(\" \"), (!!(!scope.row.status)) ? _c('gs-button', {\n          attrs: {\n            \"disabled\": !!(!scope.row.disable),\n            \"type\": \"text-primary\"\n          },\n          on: {\n            \"click\": function($event) {\n              _vm.changeRoleStatus(scope)\n            }\n          }\n        }, [_vm._v(\"启用\")]) : _vm._e(), _vm._v(\" \"), _c('gs-button', {\n          attrs: {\n            \"disabled\": !!(!scope.row.delete),\n            \"type\": \"text-primary\"\n          },\n          on: {\n            \"click\": function($event) {\n              _vm.deleteRole(scope)\n            }\n          }\n        }, [_vm._v(\"删除\")])]\n      }\n    }])\n  })], 1)], 1)\n}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3723539a\",\"hasScoped\":false}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/auth/role/index.vue\n// module id = 1828\n// module chunks = 16","import http from 'src/utils/http';\r\n\r\nexport function getRoleList(params) {\r\n  return http.post(`/role/roles`, params);\r\n}\r\nexport function deleteRole(roleId) {\r\n  return http.delete(`/role/${roleId}`);\r\n}\r\nexport function getPrivileges(params) {\r\n  return http.post(`/role/privileges`, params);\r\n}\r\nexport function addRole(params) {\r\n  return http.post(`/role`, params);\r\n}\r\nexport function getMemberList(roleId, params) {\r\n  return http.post(`/role/${roleId}/users`, params);\r\n}\r\nexport function deleteMember(roleId, users) {\r\n  return http.delete(`/role/${roleId}/user`, { data: users });\r\n}\r\nexport function addMember(roleId, users) {\r\n  return http.post(`role/${roleId}/user`, users);\r\n}\r\nexport function getRolePrivilege(roleId) {\r\n  return http.get(`/role/${roleId}/privileges`);\r\n}\r\nexport function changePrivilege({params, roleId}) {\r\n  return http.put(`/role/${roleId}/privileges`, params);\r\n}\r\nexport function changeRoleStatus({roleId, status}) {\r\n  return http.put(`/role/${roleId}/${status}`);\r\n}\r\nexport function getAllMemberList(roleId, params) {\r\n  return http.post(`/role/users/${roleId}`, params);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/service/auth/role.js"],"sourceRoot":""}