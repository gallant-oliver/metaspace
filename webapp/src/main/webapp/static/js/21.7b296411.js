webpackJsonp([21],{2169:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(2170),n=a(2172),i=a(108)(s.a,n.a,null,null,null);e.default=i.exports},2170:function(t,e,a){"use strict";var s=a(162),n=a.n(s),i=a(783),c=a(801),l=a(2171);a.n(l);e.a={components:{BreadCrumb:i.a},data:function(){return{list:[],loading:!1,checked:!1}},mounted:function(){var t=localStorage&&localStorage.getItem("SELECTED_API");this.list=t?JSON.parse(t):[]},methods:{delApi:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"确定移除该API吗？",onOk:function(){e.list.splice(t.$index,1),localStorage&&localStorage.setItem("SELECTED_API",n()(e.list)),e.$Message.success("移除成功")}})},publishApi:function(){var t=this;this.loading=!0;var e=this.list.map(function(t){return t.guid});c.publishApi({ids:e,status:1}).then(function(e){t.loading=!1,t.$Message.success("发布成功"),localStorage&&localStorage.removeItem("SELECTED_API"),t.back()}).catch(function(){t.loading=!1})},back:function(){this.$router.push("/main/data-share")}}}},2171:function(t,e){},2172:function(t,e,a){"use strict";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"api-publish-page"},[a("div",{staticClass:"content-header"},[a("bread-crumb",{attrs:{"current-level":"API发布","upper-level":"数据分享","back-path":"/main/data-share"}})],1),t._v(" "),a("div",{staticClass:"api-publish-body"},[a("div",{staticClass:"publish-content"},[a("div",{staticClass:"title-text"},[t._v("发布API列表：")]),t._v(" "),a("el-table",{staticClass:"api-table",attrs:{data:t.list}},[a("el-table-column",{attrs:{label:"序号",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"名称",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"分组",prop:"groupName"}}),t._v(" "),a("el-table-column",{attrs:{label:"版本",prop:"version"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("gs-button",{attrs:{type:"text-primary",icon:"close"},on:{click:function(a){return t.delApi(e)}}})]}}])})],1),t._v(" "),a("hr",{staticClass:"split-line"}),t._v(" "),a("gs-checkbox",{staticClass:"confirm-checkbox",model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("我已检查以上内容并了解发布影响，确认操作")]),t._v(" "),a("div",{staticClass:"btn-group"},[a("gs-button",{attrs:{disabled:!t.checked||!t.list.length,loading:t.loading,type:"primary"},on:{click:t.publishApi}},[t._v("确定")]),t._v(" "),a("gs-button",{attrs:{type:"default"},on:{click:t.back}},[t._v("取消")])],1)],1)])])},staticRenderFns:[]};e.a=s},783:function(t,e,a){"use strict";var s=a(784),n=a(787);a.n(n);e.a=s.a},784:function(t,e,a){"use strict";var s=a(785),n=a(786),i=a(108)(s.a,n.a,null,null,null);e.a=i.exports},785:function(t,e,a){"use strict";e.a={name:"BreadCrumb",props:{currentLevel:{type:String,required:!0},upperLevel:{type:String,default:""},backPath:{type:String,default:""}},data:function(){return{}},computed:{isHideNav:function(){return!!this.$router.currentRoute.query.nav}},methods:{backBtnClick:function(){this.$emit("back")}}}},786:function(t,e,a){"use strict";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return!t.upperLevel||t.isHideNav?a("div",{staticClass:"content-header-single"},[t._t("header",[t._v("\n    "+t._s(t.currentLevel)+"\n  ")])],2):a("div",{staticClass:"content-header-both"},[a("div",{staticClass:"back-link"},[a("router-link",{attrs:{to:t.backPath}},[a("gs-button",{staticClass:"back-btn",attrs:{type:"primary"},on:{click:t.backBtnClick}},[a("i",{staticClass:"gs-icon gs-icon-revoke"})])],1)],1),t._v(" "),a("div",{staticClass:"nav-name"},[a("div",{staticClass:"current-nav"},[t._v(t._s(t.currentLevel))]),t._v(" "),a("div",{staticClass:"upper-nav"},[t._v(t._s(t.upperLevel))])])])},staticRenderFns:[]};e.a=s},787:function(t,e){}});
//# sourceMappingURL=21.7b296411.js.map